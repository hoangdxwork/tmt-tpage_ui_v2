
<button tds-button-icon color="secondary" tds-dropdown trigger="click"
    [tdsDropdownMenu]="menu" [autoClose]="false" [clickHide]="false" (click)="loadSummaryStatus()"
    size="md" class="relative" [(visible)]="isVisible" tds-tooltip tooltipTitle="Lọc dữ liệu">
  <span class="flex items-center">
      <i class="tdsi-filter-2-line text-lg leading-none text-neutral-1-500"></i>
  </span>
  <span *ngIf="checkActive() && isActive " class="tdsi-success-fill absolute text-[#28A745] text-body-2 top-[-11px] right-[-6px]" style="font-size: 22px"></span>
</button>
<tds-dropdown-menu #menu="tdsDropdownMenu" >
  <div class="w-full p-4">

      <!-- invoice, refund -->
      <!-- <div class="mb-4">
        <p class="mb-2 font-semibold text-[#5A6271] size-[14px]">BÁN HÀNG</p>
        <div class="w-full flex flex-wrap items-center gap-x-2 gap-y-2">
          <tds-tag mode="checkable" [checked]="filterObj.Type == 'invoice'" (checkedChange)="selectType($event)">
            Bán hàng
          </tds-tag>
          <tds-tag mode="checkable" [checked]="filterObj.Type == 'refund'" (checkedChange)="selectType($event)">
            Trả hàng
          </tds-tag>
        </div>
      </div> -->

      <div class="mb-4">
          <p class="mb-2 font-semibold text-[#5A6271] size-[14px]">TÌM THEO NGÀY</p>
          <div>
             <tds-range-picker [(ngModel)]="datePicker" (ngModelChange)="onChangeDate($event)"></tds-range-picker>
          </div>
      </div>
      <div class="w-full mb-4">
          <p class="mb-2 font-semibold text-[#5A6271] size-[14px]">TRẠNG THÁI</p>
          <div class="w-full flex flex-wrap items-center gap-x-2 gap-y-2">
            <div *ngFor="let item of status">
              <tds-tag mode="checkable" [(checked)]="item.IsSelected" (checkedChange)="selectState(item)">
                {{item.Name}}
              </tds-tag>
              <!-- listStatus -->
            </div>
          </div>
      </div>
      <div class="w-full mb-4">
          <p class="mb-2 font-semibold text-[#5A6271] size-[14px]">VẬN ĐƠN</p>
          <div class="w-full flex flex-wrap items-center gap-x-2 gap-y-2">
            <div *ngFor="let item of trackingRefs">
              <tds-tag mode="checkable" [(checked)]="item.IsSelected" (checkedChange)="selectTracking(item)">
                {{item.text}}
              </tds-tag>
            </div>
          </div>
      </div>
      <div class="w-full mb-4">
          <p class="mb-2 font-semibold text-[#5A6271] size-[14px]">TRẠNG THÁI GH</p>
          <div class="w-full">
            <tds-form-field>
              <tds-select valueField="name" textField="name" placeholder='Chọn trạng thái GH'
                    [(ngModel)]="shipPaymentStatus" [allowClear]="true" [valuePrimitive]="false"
                    [data]="lstShipPaymentStatus" (ngModelChange)="onChangeShipPaymentStatus($event)" >
                </tds-select>
            </tds-form-field>
          </div>
      </div>

      <!-- Chiến dịch live -->
      <div class="w-full mb-4">
          <p class="mb-2 font-semibold text-[#5A6271] size-[14px]">CHIẾN DỊCH LIVE</p>
          <div class="w-full">
            <tds-form-field>
                <tds-select
                    valueField="Id" textField="Name"
                    placeholder='Chọn chiến dịch' [(ngModel)]="selectCampaign"
                    (selectChange)="onChangeLiveCampaign($event)"
                    (onSearch)="onSearchLiveCampaign($event)"
                    [data]="lstCampaign" [allowClear]="true">
                </tds-select>
            </tds-form-field>
          </div>
      </div>

      <div class="w-full mb-4">
          <p class="mb-2 font-semibold text-[#5A6271] size-[14px]">THẺ</p>
          <div class="w-full">
            <tds-form-field>
                <tds-select
                    valueField="Id" textField="Name"
                    placeholder='Chọn thẻ' [(ngModel)]="selectTags"
                    (ngModelChange)="onChangeTags($event)"
                    [data]="lstTags" mode="multiple" >
                </tds-select>
            </tds-form-field>
          </div>
      </div>

      <div class="w-full flex align-center justify-between">
          <button tds-button color="primary" size="sm" (click)="onCancel()">
              <span class="flex items-center">
                  <i class="tdsi-close-fill text-sm leading-none mr-2"></i> Bỏ lọc
              </span>
          </button>
          <div>
            <button tds-button color="secondary" size="sm" (click)="closeMenu()">Đóng</button>
            <button tds-button color="primary"  class="ml-2" size="sm" (click)="onApply()">Áp dụng</button>
          </div>
      </div>
  </div>
</tds-dropdown-menu>
