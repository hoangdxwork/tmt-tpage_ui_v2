<div class="bg-white w-full mb-4 rounded-md">
    <div class="border-b flex flex-row align-center justify-between p-4">
        <div class="flex flex-row items-center w-full">
            <tds-avatar class="bg-primary-1 text-white mr-2.5" icon="tdsi-tag-fill"></tds-avatar>
            <span class="text-neutral-1-900 text-header-1 font-semibold">NHÃN HỘI THOẠI</span>
        </div>
        <div class="flex flex-row items-center">
            <div class="flex flex-row items-center w-[300px] mr-2.5">
                <tds-avatar tdsSrc="assets/images/Avatar-user.png"></tds-avatar>
                <tds-select valueField="name" textField="name" [ngModel]="selectedItem"
                [placeholder]="selectedItem" [data]="selectList" [border]="false" class="truncate ... w-[250px] tds-report-filter"
                (ngModelChange)="onChangeSelect($event)" size="md" classIcon="tdsi-arrow-down-fill">
                </tds-select>
            </div>
            <tds-range-picker [(ngModel)]="rangeDate" (ngModelChange)="onChangeDate($event)" class="w-[266px]"></tds-range-picker>
        </div>
    </div>

    <div *ngIf="!emptyData; else emptyTmp">
        <div class="flex flex-col w-full px-4 py-9">
            <div class="grid grid-cols-4 gap-y-6 gap-x-4 h-full w-full">
                <div *ngFor="let item of tableData">
                    <div class="flex flex-col h-[150px] border rounded-md border-neutral-2-200 shadow-1-sm">
                        <div class="flex flex-row items-center w-full h-1/3 px-5 pt-2 rounded-t-md">
                            <span class="text-body-2 font-normal text-center font-sans pr-2" [class]="item.value > 0 ?'text-primary-1':'text-error-400'">{{item.percent}}<i [class]="item.value > 0 ? 'tdsi-chart-up-line':'tdsi-chart-down-line'"></i></span>
                            <span class="text-neutral-1-400 text-body-2 font-normal font-sans text-center">{{item.filter}}</span>
                        </div>
                        <div class="flex items-center w-full h-1/3 px-5 pb-3 text-neutral-1-900 text-heading-4 font-semibold font-sans">{{item.value}}</div>
                        <div class="flex items-center w-full h-1/3 px-5 rounded-b-md text-white text-body-2 font-normal font-sans" [style.background-color]="item.color">{{item.labelName}}</div>
                    </div>
                </div>
              </div>
        </div>
    </div>
</div>

<div *ngIf="!emptyData" class="bg-white w-full rounded-md">
    <tds-table #basicTable [listData]="tableData" [showPagination]="false" class="tds-report-table">
        <thead class="text-neutral-1-900 text-body-2 font-semibold font-sans">
              <tr>
                    <th>Tên nhãn</th>
                    <ng-template ngFor let-item [ngForOf]="basicTable.data[0].data">
                        <th>{{item.name}}</th>
                    </ng-template>
                    <th>Tổng lượt sử dụng</th>
              </tr>
        </thead>
        <tbody class="text-neutral-1-900 text-body-2 font-regular font-sans">
            <ng-template ngFor let-item [ngForOf]="basicTable.data">
                <tr>
                    <td><span class="rounded-md text-white text-caption-2 font-semibold px-2 py-1" [style.background-color]="item.color">{{ item.labelName }}</span></td>
                    <ng-template ngFor let-data [ngForOf]="item.data" >
                        <td>{{ data.value }}</td>
                    </ng-template>
                    <td>
                        <span class="text-primary-1">{{item.usedTime}}</span>
                    </td>
                </tr>
            </ng-template>
        </tbody>
    </tds-table>
</div>

<!-- empty -->
<ng-template #emptyTmp>
    <div class="h-[434px]">
        <app-report-empty-data></app-report-empty-data>
    </div>
</ng-template>