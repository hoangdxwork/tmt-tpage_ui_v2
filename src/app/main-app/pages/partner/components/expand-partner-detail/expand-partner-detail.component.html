<div>
  <tds-tabset class="bg-white w-full border rounded-md">
    <tds-tab [title]="'Thông tin'">
      <div class="flex flex-col gap-y-4 w-full text-neutral-900 text-body-2">
        <div class="flex w-full gap-x-6  items-center">
          <tds-avatar [shape]="'square'" [size]="'xl'" [tdsSrc]="dataPartner.ImageUrl ? dataPartner.ImageUrl : 'error'"></tds-avatar>
          <div>
            <h1 class="text-header-1 font-semibold">{{dataPartner.Name}}</h1>
          </div>
        </div>
        <div class="grid grid-cols-3 w-full gap-x-8 gap-y-4">
          <div class="col-span-1 flex gap-x-4">
            <div class="w-1/3"><span class="font-regular">Mã khách hàng</span></div>
            <div class="w-2/3 font-semibold">{{dataPartner.Ref || 'N/A'}}</div>
          </div>
          <div class="col-span-1 flex gap-x-4">
            <div class="w-1/3"><span class="font-regular">Sinh nhật</span></div>
            <div class="w-2/3 font-semibold">{{dataPartner.BirthDay? (dataPartner.BirthDay | date:'dd/MM/yyyy'): '---'}}</div>
          </div>
          <div class="col-span-1 flex gap-x-4">
            <div class="w-1/3"><span class="font-regular">Nhóm KH</span></div>
            <div class="w-2/3 font-semibold">{{dataPartner.PartnerCategoryName? dataPartner.PartnerCategoryName: '---'}}</div>
          </div>
          <div class="col-span-1 flex gap-x-4">
            <div class="w-1/3"><span class="font-regular">Tên khách hàng</span></div>
            <div class="w-2/3 font-semibold">{{dataPartner.Name}}</div>
          </div>
          <div class="col-span-1 flex gap-x-4">
            <div class="w-1/3"><span class="font-regular">Địa chỉ</span></div>
            <div class="w-2/3 font-semibold">{{dataPartner.Street? dataPartner.Street: '---'}}</div>
          </div>
          <div class="col-span-1 flex gap-x-4">
            <div class="w-1/3"><span class="font-regular">Mã số thuế</span></div>
            <div class="w-2/3 font-semibold">{{dataPartner.TaxCode? dataPartner.TaxCode: '---'}}</div>
          </div>
          <div class="col-span-1 flex gap-x-4">
            <div class="w-1/3"><span class="font-regular">Điện thoại</span></div>
            <div class="w-2/3 font-semibold">{{dataPartner.Phone? dataPartner.Phone: '---'}}</div>
          </div>
          <div class="col-span-1 flex gap-x-4">
            <div class="w-1/3"><span class="font-regular">Facebook</span></div>
            <div class="w-2/3 font-semibold">
              <a href="https://www.facebook.com/dataPartner.FacebookId" target="_blank">{{dataPartner.FacebookId ? 'facebook.com/' + dataPartner.FacebookId : '---'}}</a>
          </div>
          </div>
          <div class="col-span-1 flex gap-x-4">
            <div class="w-1/3"><span class="font-regular">Trạng thái</span></div>
            <div class="w-2/3 font-semibold">
              <tds-button-group>
                <div tds-button color="secondary" tds-dropdown trigger="click" [tdsDropdownMenu]="menu"
                  class="rounded-md px-2" [ngStyle]="getStatusColor(dataPartner?.StatusText) | buttonStatusColor">
                  <span class="flex items-center font-semibold font-sans cursor-pointer">
                    {{ dataPartner.StatusText || 'Bình thường' }} <i class="tdsi-arrow-down-fill text-lg leading-none ml-1"></i>
                  </span>
                </div>
                <tds-dropdown-menu #menu="tdsDropdownMenu">
                  <div class="w-full">
                    <div tds-dropdown-item *ngFor="let status of lstPartnerStatus" (click)="selectStatus(status)">
                      <a [ngStyle]="{'color': status.value }"> {{ status.text }} </a>
                    </div>
                  </div>
                </tds-dropdown-menu>
              </tds-button-group>
            </div>
          </div>
          <div class="col-span-1 flex gap-x-4">
            <div class="w-1/3"><span class="font-regular">Email</span></div>
            <div class="w-2/3 font-semibold">{{dataPartner.Email? dataPartner.Email: '---'}}</div>
          </div>
          <div class="col-span-1 flex gap-x-4">
            <div class="w-1/3"><span class="font-regular">Zalo</span></div>
            <div class="w-2/3 font-semibold">{{dataPartner.Zalo? dataPartner.Zalo: '---'}}</div>
          </div>

        </div>
        <div class="flex flex-col w-full gap-y-4 pt-4 border-t border-light-200">
          <div class="flex w-full gap-x-6">
            <div class="w-[10%]"><span class="font-regular">Doanh số đầu kỳ:</span></div>
            <div><span class="font-semibold">{{revenues?.RevenueBegan | number:'1.0-3'}}</span></div>
          </div>
          <div class="flex gap-x-6">
            <div class="w-[10%]"><span class="font-regular">Doanh số:</span></div>
            <div><span class="font-semibold">{{revenues?.Revenue | number:'1.0-3'}}</span></div>
          </div>
          <div class="flex gap-x-6">
            <div class="w-[10%]"><span class="font-semibold">Tổng doanh số:</span></div>
            <div><span class="font-semibold text-header-1">{{revenues?.RevenueTotal | number:'1.0-3'}}</span></div>
          </div>
          <div>
            <button tds-button color="primary" (click)="showModalPayment()">Thanh toán</button>
          </div>
        </div>
      </div>
    </tds-tab>
    <tds-tab [title]="'Hóa đơn'" clsContent="p-0 pb-2.5">
      <div class="text-neutral-900 text-body-2">
        <tds-table #rowSelectionTable1 [showSizeChanger]="true" [frontPagination]="false" [listData]="lstInvocie"
        [(pageSize)]="pageSize2" [(pageIndex)]="pageIndex2" [total]="countInvocie" [scroll]="{y:'auto'}"
        [loading]="isLoading" (clickRefresh)="refreshInvoice()"
        (queryParams)="onQueryParamsChangeInvocie($event)">
          <thead>
            <tr>
              <th>Mã</th>
              <th>Ngày hóa đơn</th>
              <th>Loại</th>
              <th>Người lập</th>
              <th>Nguồn</th>
              <th>Trạng thái</th>
              <th>Tổng Tiền</th>
              <th>Chi tiết</th>
            </tr>
          </thead>
          <tbody>
            <ng-template ngFor let-data [ngForOf]="rowSelectionTable1.data" let-odd='odd'>
              <tr>
                <td>{{ data.Number }}</td>
                <td>{{ data.DateInvoice | date:"dd/MM/yyyy" }}</td>
                <td>{{ data.ShowType }}</td>
                <td>{{ data.UserName }}</td>
                <td>{{ data.Reference? data.Reference: '---' }}</td>
                <td>
                  <tds-badge class="mr-2" [status]="checkStatus(data.ShowStateFast)"></tds-badge>
                  <span>{{data.ShowStateFast}}</span>
                </td>
                <td>{{ data.AmountTotal| number:'1.0-3' }}</td>
                <td>
                  <div>
                    <a tds-button-icon color="secondary" tds-tooltip="Chi tiết" size="sm" (click)="onView(data)">
                      <i class="tdsi-information-fill text-neutral-1-500"></i>
                    </a>
                  </div>
                </td>
              </tr>
            </ng-template>
          </tbody>
        </tds-table>
      </div>
    </tds-tab>
    <tds-tab [title]="'Chi tiết nợ'" clsContent="p-0 pb-2.5">
      <div class="text-neutral-900 text-body-2 w-full">
        <tds-table #rowSelectionTable2 [showSizeChanger]="true" [frontPagination]="false" [listData]="lstCreditDebit"
            [(pageSize)]="pageSize1" [(pageIndex)]="pageIndex1" [total]="countDebit" [scroll]="{y:'auto'}"
            [loading]="isLoading" (clickRefresh)="refreshCreditDebit()"
            (queryParams)="onQueryParamsChangeCreditDebit($event)">
            <thead>
              <tr>
                <th>Ngày</th>
                <th>Chứng từ/Hóa đơn</th>
                <th class="text-right">Còn nợ</th>
              </tr>
            </thead>
            <tbody>
              <ng-template ngFor let-data [ngForOf]="rowSelectionTable2.data" let-odd='odd'>
                <tr>
                  <td>{{ data.Date | date:"dd/MM/yyyy"}}</td>
                  <td>{{ data.DisplayedName }}</td>
                  <td class="text-right">{{ data.AmountResidual | number:'1.0-3' }}</td>
                </tr>
              </ng-template>
            </tbody>
        </tds-table>
      </div>
    </tds-tab>
  </tds-tabset>
</div>
