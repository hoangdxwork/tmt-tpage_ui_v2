
<div class="rounded-xl bg-white p-4 flex h-full flex-col gap-y-4 text-body-2 text-neutral-1-900">
  <div class="flex gap-x-2">
      <tds-form-field class="w-full">
          <input tdsInput placeholder="Tìm kiếm ..." autocomplete="off"  [tdsInputDebounce]="750" [(ngModel)]="textSearchProduct"
          [ngModelOptions]="{standalone: true}" (inputKeyup)="onSearchProduct($event)"/>
          <span tdsPrefix><i class="text-neutral-1-500 tdsi-search-fill"></i></span>
      </tds-form-field>
      <button tds-button color="primary" (click)="showModalAddProduct()">
        <span class="flex items-center">
          <i class="tdsi-plus-circle-fill text-lg leading-none mr-2"></i>Thêm mới
        </span>
      </button>
  </div>
  <div class="h-[400px] max-h-[400px] w-full" >
    <tds-table #basicTable class="w-full h-full"
        [listData]="indexDbStorage | filterindexdblive: innerTextDebounce"
        [scroll]="{y:'100%',x:'hidden'}" [showPagination]="false"
        [frontPagination]="false" [virtualItemSize]="20"
        [loading]="isLoading" [virtualForTrackBy]="trackByIndex">
          <thead>
              <tr>
                  <th width="60%">Sản phẩm</th>
                  <th width="25%">Đơn vị</th>
                  <th width="15%">Giá</th>
              </tr>
          </thead>
          <tbody>
            <ng-template tds-virtual-scroll let-data let-index="index">
                <tr class="cursor-pointer" *ngIf="data" (click)="addItem(data)" [ngClass]="{'tds-row-selected':setOfCheckedId.has(data)}">
                    <td>
                    <div class="flex gap-x-2 items-center">
                        <div>
                            <tds-avatar [isAvatar]="false" [shape]="'square'" [size]="'lg'" [tdsSrc]="data.ImageUrl">
                            </tds-avatar>
                        </div>
                        <div class="flex flex-col">
                            <span class="text-body-2" [ngClass]=" {'font-semibold' : defaultOrder == true} ">{{ data.NameGet }}</span>
                            <span class="text-neutral-1-400 font-regular text-body-2 flex gap-x-2 items-center"> Tồn kho:
                                <span class="text-primary-1" *ngIf="inventories">{{inventories[data.Id] ? inventories[data.Id].QtyAvailable : 0}}</span>
                                <tds-spinner [color]="'primary'" class="w-2.5 h-2.5"
                                    *ngIf="!inventories"></tds-spinner>
                            </span>

                            <span class="text-neutral-1-400 font-regular text-body-2 flex gap-x-2 items-center"> Tồn dự báo:
                                <span class="text-primary-1" *ngIf="inventories">{{inventories[data.Id] ? inventories[data.Id].VirtualAvailable : 0}}</span>
                                <tds-spinner [color]="'primary'" class="w-2.5 h-2.5"
                                    *ngIf="!inventories"></tds-spinner>
                            </span>
                        </div>
                    </div>
                    </td>
                    <td class="text-body-2">{{ data.UOMName }}</td>
                    <td class="text-body-2">{{ data.Price | numberCustom }} đ</td>
                    <td>
                    <!-- <div>
                        <button type="button" title="Thêm sản phẩm vào đơn hàng" tds-button-outline color="secondary" type="submit" size="sm" (click)="addItem(data)">
                            <span class="flex items-center text-primary-1">
                                <i class="tdsi-add-fill mr-2 text-xl leading-none"></i>Thêm vào
                            </span>
                        </button>
                    </div> -->
                    </td>
                </tr>
            </ng-template>
          </tbody>
      </tds-table>
  </div>
</div>
<div class="w-full flex justify-end p-4" *tdsModalFooter>
    <button tds-button color="secondary" class="min-w-[100px]" (click)="onCancel()">Đóng</button>
</div>

