<div class="flex flex-col w-full px-4 border border-neutral-2-200 bg-neutral-3-50 rounded-xl relative">
    <!-- upload-wall -->
    <div [ngClass]="uploadedImages.length>0?'translate-y-0 pb-4 pt-2 border-b':'translate-y-full h-0 '"
        class=" border-neutral-2-300 ease-in-out duration-300 max-h-40 overflow-hidden flex">
        <div class="overflow-hidden overflow-y-auto tds-custom-scroll flex justify-between w-full h-full">
            <upload-pictures-wall [isArray]="true" [data]="uploadedImages" (onLoadImage)="onLoadImage($event)">
            </upload-pictures-wall>
            <div class="pt-2 pr-1">
                <button tds-button-icon color="secondary" size="sm" class="!rounded-full" (click)="closeImages()">
                    <span class="flex items-center">
                        <i class="tdsi-close-fill"></i>
                    </span>
                </button>
            </div>
        </div>
    </div>
    <div class="w-full pt-4 flex flex-row">
        <textarea tdsInput placeholder="Nhập nội dung tin nhắn" [(ngModel)]="messageModel"
            [ngModelOptions]="{standalone: true}" class="h-16 resize-none !p-0 !m-0 no-scrollbar"></textarea>
    </div>
    <!-- toolbar -->
    <div class="w-full flex justify-end items-center">
        <a class="p-2" type="button" (click)="sendIconLike()">
            <div class="tdsi-like-line text-neutral-1-400 text-xl cursor-pointer"></div>
        </a>
        <a class="tdsi-emotion-line text-neutral-1-400 text-xl cursor-pointer p-2" type="button" tds-popover
            popoverTrigger="click" [popoverContent]="infoEmojiMart" [popoverAutoClose]="true" [popoverBackdrop]="true"
            popoverPlacement="top">
            <ng-template #infoEmojiMart>
                <div (loadEmojiMart)="loadEmojiMart($event)" icon-emoji-mart></div>
            </ng-template>
        </a>
        <!-- <a type="button" class="p-2" (click)="onProductsbypageFb()">
            <div class="tdsi-product-line text-neutral-1-400 text-xl cursor-pointer"></div>
        </a> -->
        <quick-reply-button class="p-2" (onQuickReplySelected)="onQuickReplySelected($event)"></quick-reply-button>
        <tds-upload class="p-2" listType="picture" [customRequest]="handleUpload" [showUploadList]="false">
            <a type="button" class="tdsi-image-line text-neutral-1-400 text-xl cursor-pointer">
            </a>
        </tds-upload>
    </div>
</div>
<div class="w-full flex justify-end p-4" *tdsModalFooter>
    <button tds-button class="mr-2 min-w-[100px]" color="secondary" (click)="onCancel()">
        <span class="flex items-center">
            Hủy bỏ
        </span>
    </button>
    <tds-spin [spinning]="isSending" [indicator]="indicatorTemplate">
        <button tds-button color="primary" class="min-w-[100px]" type="submit" (click)="onClickSender()">
                <span class="flex items-center">
                    <i class="tdsi-send-fill text-lg leading-none mr-2"></i> Gửi
                </span>
        </button>
    </tds-spin>
</div>
<ng-template #indicatorTemplate>
    <tds-spinner [color]="'primary'" class="w-5 h-5"></tds-spinner>
</ng-template>
