<div class="w-full flex flex-row items-center justify-between border rounded-xl p-2.5 text-body-2 text-neutral-1-900" *ngIf="defaultProduct; else tableAttribute">
    <div class="flex flex-row items-center gap-x-4">
        <tds-avatar [tdsSrc]="defaultProduct.ImageUrl" [isAvatar]="false" [shape]="'square'" [size]="52" class="rounded-lg"></tds-avatar>
        <div class="flex flex-col">
            <span class="font-semibold">{{ defaultProduct.ProductNameGet }}</span>

            <div class="flex gap-x-2 text-neutral-1-400 text-caption-1">
                <span class="">
                    {{ defaultProduct.UOMName }} - {{ (defaultProduct.Price || 0) | numberCustom  }}đ
                </span>
    
                <span class="tdsi-edit-line flex text-base cursor-pointer" tds-popover [(popoverVisible)]="isVisible" (click)="onOpenPopover()"
                    popoverTrigger="click" [popoverContent]="tmpEditPrice" [popoverAutoClose]="true" [popoverBackdrop]="true" [popoverAutoClose]="true">
                </span>
    
                <ng-template #tmpEditPrice>
                    <div class="w-[336px] flex flex-col gap-y-4">
                        <div class="flex gap-x-4 items-center">
                            <tds-label class="w-1/3">Đơn giá</tds-label>
    
                            <tds-form-field class="w-2/3">
                                <tds-input-number autocomplete="off" placeholder="0" [min]="0" [step]="1000"
                                    [formatter]="numberWithCommas" [parser]="parserComas"
                                    [(ngModel)]="Price" [ngModelOptions]="{standalone: true}">
                                </tds-input-number>
                            </tds-form-field>
                        </div>
    
                        <div class="flex gap-x-2 mt-4 justify-end">
                            <button class="min-w-[89px]" type="button" tds-button color="secondary" size="sm" (click)="closePriceDetail()">Hủy bỏ</button>
                            <button class="min-w-[89px]" type="button" tds-button color="primary" size="sm" (click)="approvePrice()">Áp dụng</button>
                        </div>
                    </div>
                </ng-template>
            </div>
            
        </div>
    </div>
    <div class="flex flex-col gap-y-2">
        <span class="font-semibold">Số lượng</span>
        <div class="flex gap-x-2 items-center">
            <button type="button" class="tdsi-minus-fill text-white p-0.5 bg-neutral-1-200 rounded-full hover:bg-primary-1" [disabled]="defaultProduct.Quantity == 1" (click)="minus()"></button>

            <tds-form-field class="w-[50px] hover:bg-primary-1 bg-opacity-10 rounded">
                <input tdsInput autocomplete="off" class="text-center font-semibold text-neutral-1-900" placeholder="Số lượng" [(ngModel)]="defaultProduct.Quantity" [ngModelOptions]="{standalone: true}" disabled="true" />
            </tds-form-field>
            <button type="button" class="tdsi-plus-fill text-white p-0.5 bg-neutral-1-200 rounded-full hover:bg-primary-1" (click)="plus()"></button>
        </div>
    </div>
    
    <div class="flex flex-row items-center gap-x-2">
        <button tds-button-flat color="secondary" (click)="createDefaultProduct()">
            <span class="flex items-center">
                <i class="tdsi-in-out-fill text-xl leading-5 mr-2"></i>Thay đổi
            </span>
        </button>
        <div class="border border-neutral-2-200 h-[16.5px]"></div>
        <button tds-button-flat color="secondary" (click)="removeDefaultProduct()">
            <span class="flex items-center">
                <i class="tdsi-trash-fill text-xl leading-5 mr-2"></i>Xóa
            </span>
        </button>
    </div>  
     
</div>

<ng-template #tableAttribute>
    <div class="flex flex-col gap-y-8 justify-center items-center">
        <div class="flex flex-col gap-y-4 items-center">
            <img src="../../assets/imagesv2/live-campaign/noData.svg" alt="">
            <span class="text-neutral-1-400 text-body-2">Chưa có sản phẩm mặc định nào</span>
        </div>
        <button tds-button type="button" color="primary" (click)="createDefaultProduct()">
            <span class="flex items-center">
                <i class="tdsi-product-fill mr-2"></i>Chọn sản phẩm
            </span>
        </button>
    </div>
</ng-template>

<div *tdsModalFooter class="flex justify-end p-4">
    <button tds-button-outline color="secondary" (click)="onCancel()">Đóng</button>
</div>