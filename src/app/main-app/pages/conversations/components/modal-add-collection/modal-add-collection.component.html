<tds-spin [spinning]="isLoading">
  <div class="flex flex-col h-full w-full">
    <div class="flex items-center gap-2.5">
        <tds-form-field class="w-full">
            <input [(ngModel)]="name" class="placeholder-neutral-1-400" placeholder="Đặt tên bộ sưu tập" tdsInput />
        </tds-form-field>
        <tds-upload [multiple]="true" [beforeUpload]="beforeUpload">
          <button tds-button color="primary">
            <span class="flex items-center">
                <i class="tdsi-upload-fill text-lg leading-none mr-2"></i>Tải ảnh lên
            </span>
          </button>
        </tds-upload>
    </div>
    <div class="max-h-[calc(100vh-375px)] w-full overflow-y-auto tds-custom-scroll py-5">
        <div class="grid grid-cols-4 gap-5 h-full w-full" *ngIf="lstData && lstData.length > 0; else noData">
          <ng-template ngFor let-data [ngForOf]="lstData">
            <div>
                <div class="relative rounded-lg border border-transparent border-solid group">
                    <!-- <div class="absolute top-1 right-1 opacity-0 group-hover:opacity-100">
                        <tds-checkbox [(ngModel)]="data.Select" (change)="checkValue(data)"></tds-checkbox>
                    </div> -->
                    <img [src]="data.Url">
                    <div class="absolute bottom-0 opacity-0 group-hover:opacity-100 w-full">
                        <div class="flex p-2.5 gap-2.5 bg-gradient-to-b from-black/0 to-black/100 items-center rounded-b-lg justify-between">
                            <div class="text-body-2 text-white font-semibold font-sans"> {{ data.Name }} </div>
                            <div class="flex gap-0.5">
                                <div class="flex items-center">
                                  <i class="tdsi-edit-fill text-sm text-white leading-none p-1.5 bg-inherit hover:bg-neutral-3-50/9 rounded-md"></i>
                                </div>

                                <div class="flex items-center" (click)="remove(data.Url)">
                                  <i class="tdsi-trash-fill text-sm text-white leading-none p-1.5 bg-inherit hover:bg-neutral-3-50/9 rounded-md"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
          </ng-template>
        </div>
        <ng-template #noData>
          <tds-upload
            type="drag"
            [multiple]="true"
            (uploadChange)="handleChange($event)"
            [beforeUpload]="beforeUpload"
            [download]="handleDownload" [isOpenFileDialogOnClick]="false"
          >
            <div class="w-full h-full p-4 border border-dashed border-neutral-2-200 rounded">
              <div class="flex items-center flex-col">
                <img src="../../../assets/imagesv2/attachment/images-empty.svg" alt="" class="mb-4">
                <p class="font-semibold mb-4 text-2xl">Kéo thả hoặc tải ảnh của bạn lên tại đây</p>
                <p class="font-normal mb-6 text-sm text-neutral-1-400">
                  Bạn chỉ có thể thêm tối đa 10 ảnh cùng lúc. Dung lượng tối <br>
                  đa 5MB. Định dạng hỗ trợ: .jpg, .jpeg, .png, .gif
                </p>

                <div class="flex gap-x-2">
                  <button tds-button class="mr-2 w-[100px]" color="secondary" (click)="showModalSelectAttachment()">
                    <span class="tdsi-images-fill"></span>
                    Chọn ảnh có sẵn
                  </button>
                  <tds-upload [multiple]="true" [beforeUpload]="beforeUpload">
                    <button tds-button color="primary">
                      <span class="flex items-center">
                          <i class="tdsi-upload-fill text-lg leading-none mr-2"></i>Tải ảnh lên
                      </span>
                    </button>
                  </tds-upload>
                </div>
                <!-- <div class="text-neutral-1-900">
                  <span class="tdsi-upload-fill text-3xl text-neutral-1-500"></span>
                </div> -->
              </div>
            </div>
          </tds-upload>
        </ng-template>
    </div>
  </div>

  <div class="w-full flex justify-end p-4" *tdsModalFooter>
    <button tds-button class="mr-2 w-[100px]" color="secondary" (click)="onCancel()">Hủy bỏ</button>
    <button tds-button class="w-[100px]" type="submit" color="primary" (click)="onSave()">Lưu</button>
  </div>

</tds-spin>
