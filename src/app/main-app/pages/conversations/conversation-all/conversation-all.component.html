<div class="w-full h-full flex items-stretch bg-neutral-3-200">
  <!-- conversation list -->
  <div class="w-[357px] h-full ">
      <div class="w-full flex flex-col gap-1 p-1 h-full">
          <div class="bg-white p-2.5">
            <div class="block items-center">
                  <tpage-team-dropdown (tdsClickItem)="onClickTeam($event)"></tpage-team-dropdown>
            </div>
            <!-- <div class="tdsi-reload-fill text-3xl text-neutral-1-200"></div> -->
            <div class="pt-4 flex gap-1 items-center">
              <div>
                <tds-form-field class="w-full bg-neutral-3-50">
                  <input aria-colspan="" class="placeholder-neutral-1-400"
                    placeholder="Tìm kiếm theo họ tên, SĐT" tdsInput/>
                  <span tdsPrefix><i class="text-neutral-1-500 tdsi-search-fill text-base"></i></span>
                </tds-form-field>
              </div>
              <div class="flex gap-0.5">
                <div>
                  <tds-badge [count]="iconTemplate">
                    <div class="tdsi-filter-2-line text-2xl text-neutral-1-500 p-2"></div>
                  </tds-badge>
                  <ng-template #iconTemplate>
                    <span
                      class="tdsi-success-fill text-primary-1 text-lg absolute top-4 right-2 inline-block transform translate-x-1/2 -translate-y-1/2 ">
                    </span>
                  </ng-template>
                </div>
                <div class="tdsi-sort-up-down-fill text-2xl text-neutral-1-500 p-2"></div>
                <div class="tdsi-success-line text-2xl text-neutral-1-500 p-2"></div>
              </div>
            </div>
          </div>
          <!-- List danh sách chat -->
          <div *ngIf="lstMatchingItem" class="overflow-hidden overflow-y-auto tds-custom-scroll flex flex-auto flex-col gap-1 pb-10">
            <div *ngFor="let item of lstMatchingItem; let i= index" (click)="activeConversations(item)">
                <ng-container *ngIf="activeMatchingItem && activeMatchingItem.id">
                  <active-matching-item
                      [item]="item" [psid]="item.psid" [type]="type"
                      [activeMatchingItem]="activeMatchingItem"
                      [team]="currentTeam" [isFastSend]="isFastSend">
                  </active-matching-item>
                </ng-container>
            </div>
          </div>
      </div>
  </div>
  <!--Nội dung cuộc hội thoại-->
  <div class="flex flex-auto flex-col  h-full overflow-hidden">
      <div *ngIf="activeMatchingItem && activeMatchingItem.id">
          <tds-conversations
            [data]="activeMatchingItem"
            [psid]="activeMatchingItem.psid" [type]="type"
            [team]="currentTeam"
            (onLoadMiniChat)="onLoadMiniChat($event)">
              <!-- <ng-container *ngFor="let item of listData">
                  <tds-conversation-item [data]="item"></tds-conversation-item>
              </ng-container> -->
          </tds-conversations>
      </div>
      <div *ngIf="!activeMatchingItem">
          <p>Hãy chọn một cuộc hội thoại</p>
      </div>
  </div>
  <!--Xử lí thông tin khách hàng & Đơn hàng-->
  <!-- Dữ liệu load vào form partner trước từ funtion checkConversation(),sau đó lấy dữ liệu gán lại form order -->
  <div class="w-[576px] h-full flex flex-col">
    <tds-tabset class="bg-white border border-neutral-2-200 h-full" [clsTab]="'flex-1'"
      [tabBarStyle]="{'padding-right':'0px','padding-left':'0px'}">
      <!-- tab Khách hàng -->
      <tds-tab [title]="conversationPartner" clsContent="border-t border-neutral-2-200 -mt-px h-full flex flex-col">
        <ng-template #conversationPartner let-active="active">
            <div class="flex items-center justify-center font-semibold cursor-pointer text-body-2 py-4 pr-4 relative  group"
              [ngClass]='{"text-neutral-1-900":active,"text-neutral-1-400 hover:text-neutral-1-900":!active}'>
              <span class="mr-2">Khách hàng</span>
              <div [ngClass]="{'block':active,'hidden group-hover:block':!active}"
                  class="hidden border-b-3 border-primary-1 absolute left-0 right-0 bottom-0 bg-primary-1">
              </div>
            </div>
        </ng-template>
        <div *ngIf="activeMatchingItem && activeMatchingItem?.id">
            <conversation-partner [data]="activeMatchingItem" [team]="currentTeam"></conversation-partner>
        </div>
      </tds-tab>
      <!-- tab Đơn hàng -->
      <tds-tab [title]="conversationOrder" clsContent="border-t border-neutral-2-200 h-full -mt-px flex flex-col">
        <ng-template #conversationOrder let-active="active">
          <div class="flex items-center font-semibold justify-center text-body-2 p-4 relative group cursor-pointer"
            [ngClass]='{"text-neutral-1-900":active,"text-neutral-1-400 hover:text-neutral-1-900":!active}'>
            <span class="mr-2 flex items-center">Đơn hàng <tds-tag status='primary' class="ml-3">#220300024</tds-tag></span>
            <div [ngClass]="{'block':active,'hidden group-hover:block':!active}"
              class="hidden border-b-3 border-primary-1 absolute left-0 right-0 bottom-0 bg-primary-1">
            </div>
          </div>
        </ng-template>
        <div *ngIf="activeMatchingItem && activeMatchingItem.id">
          <conversation-order [data]="activeMatchingItem"></conversation-order>
        </div>
      </tds-tab>
    </tds-tabset>
  </div>
</div>
