<div class="w-[1280px] h-full pb-4 px-4">
  <div class="flex flex-col w-full h-full rounded-xl">
    <div class="flex flex-row items-center justify-between px-4 py-3 bg-white rounded-t-xl">
      <div class="flex flex-row items-center">
        <tds-avatar class="bg-primary-1 text-white" icon="tdsi-transport-fill"></tds-avatar>
        <span class="text-neutral-1-900 text-header-1 font-semibold pl-2.5">ĐỐI TÁC GIAO HÀNG</span>
      </div>
    </div>
    <div class="flex flex-row items-center justify-between py-2.5 px-4 bg-white rounded-b-xl">
      <span class="text-neutral-1-900 text-title-1 font-semibold">Danh sách đối tác</span>
      <tds-form-field class="w-1/4 mr-2">
          <input tdsInput placeholder="Tìm kiếm ..." autocomplete="off" [tdsInputDebounce]="750"
              (inputKeyup)="onInputKeyup($event)" />
          <span tdsPrefix><i class="text-neutral-1-500 tdsi-search-fill"></i></span>
      </tds-form-field>
    </div>
    <div class="flex flex-col w-full h-full mt-2">
      <div class="w-full h-full">
        <tds-spin [spinning]="isLoading">
          <div *ngIf="providerDataSource && providerDataSource.length > 0" class="tds-panel-scroll" style="max-height: calc(80vh - 8px); overflow: auto;">
            <div *ngFor="let item of providerDataSource; let index = index" class="pr-4 py-2">
              <tds-collapse [expandIconPosition]="'right'" class="bg-white rounded-xl w-full">
                <tds-collapse-panel [header]="header" [active]="false" tdsClass="p-0"
                  bordered="false" [expandedIcon]="'tdsi-arrow-up-line'" [extra]="icon"
                  (activeChange)="onChangeCollapse(index, $event)" [active]="expandSet.has(index)">
                  <ng-template #header>
                    <div class="flex gap-4 items-center bg-neutral-3-500">
                      <div class="relative">
                        <tds-avatar
                          class="bg-base-white-100 dark:bg-d-base-white-100 justify-self-center text-base-white-500 dark:text-d-base-white-500"
                          [shape]="'square'" [size]="'xl'" [tdsSrc]="item.UrlLogo">
                        </tds-avatar>
                      </div>
                      <div class="flex flex-col gap-1">
                        <div class="flex gap-2 items-center">
                          <div class="text-title-1 font-sans font-semibold"> {{item.Name}} </div>
                        </div>
                        <div class="font-regular font-sans text-xs flex gap-x-2">
                          <p class="text-success-400 font-semibold" *ngIf="item.Description">
                            {{item.Description}}
                          </p>
                        </div>
                      </div>
                    </div>
                  </ng-template>
                  <!-- Header Icon -->
                  <ng-template #icon>
                    <div class="flex gap-4 items-center">
                      <button tds-button color="primary" [routerLink]="['/configs/delivery/connect']" [queryParams]="{type: item.Type}">
                        <span class="flex items-center">
                          <i class="tdsi-link-fill text-lg leading-none mr-2"></i>Kết nối
                        </span>
                      </button>
                    </div>
                  </ng-template>
                  <tds-spin [spinning]="isLoading1">
                    <div *ngIf="deliveryDataSource; else notDeliveryConnected" class="flex flex-col divide-y w-full">
                      <ng-template ngFor let-data let-i="index" [ngForOf]="deliveryDataSource" let-odd='odd'>
                        <div class="py-4 pl-4 pr-8 flex items-center">
                          <div class="flex flex-col gap-y-1.5 w-1/3">
                            <div class="font-semibold">{{ data.Name }}</div>
                            <div class="flex items-center gap-x-2">
                              <i class="{{ data.Active ? 'tdsi-success-fill text-success-400':'tdsi-error-fill text-error-400' }} text-xl"></i>
                              <div *ngIf="data.Active == true">
                                Có hiệu lực
                              </div>
                              <div *ngIf="data.Active == false">
                                Không có hiệu lực
                              </div>
                            </div>
                          </div>
                          <div class="flex flex-col gap-y-1.5 w-1/3 justify-center">
                            <div>Đối tác giao hàng</div>
                            <div class="font-semibold">{{ data.DeliveryType }}</div>
                          </div>
                          <div class="flex divide-x-2 font-semibold w-1/3 justify-end">
                            <div class="pr-4 flex items-center">
                              <i class="tdsi-edit-fill text-xl leading-none mr-2 text-neutral-1-500"></i>
                              <span class="cursor-pointer" [routerLink]="['/configs/delivery/edit']" [queryParams]="{id: data.Id}">Chỉnh sửa</span>
                            </div>
                            <div class="pl-4 flex items-center">
                              <i class="tdsi-trash-fill text-xl leading-none mr-2 text-neutral-1-500"></i>
                              <span class="cursor-pointer" (click)="onDeleteDelivery(data)">Xóa</span>
                            </div>
                          </div>
                        </div>
                      </ng-template>
                      <div class="text-caption-2 p-4 text-primary-1 cursor-pointer">
                        Xem thêm đối tác giao hàng
                      </div>
                    </div>
                    <!-- Chưa có Page nào được kết nối -->
                    <ng-template #notDeliveryConnected>
                      <tds-empty></tds-empty>
                    </ng-template>
                  </tds-spin>
                </tds-collapse-panel>
              </tds-collapse>
            </div>
          </div>
          <div *ngIf="(providerDataSource && providerDataSource.length === 0) || !providerDataSource">
            <tds-empty></tds-empty>
          </div>
        </tds-spin>
      </div>
    </div>
  </div>
</div>


<!--
  <tds-table #basicTable [listData]="deliveryDataSource" [bordered]="true" (clickRefresh)="refreshDataDelivery(item)">
    <thead>
      <tr class="text-neutral-1-900 text-body-2 font-semibold">
        <th width="400px">Tên</th>
        <th>Đối tác giao hàng</th>
        <th>Ngày tạo</th>
        <th>Hiệu lực</th>
        <th>Thao tác</th>
      </tr>
    </thead>
    <tbody>
      <ng-template ngFor let-data let-i="index" [ngForOf]="basicTable.data" let-odd='odd'>
        <tr class="text-neutral-1-900 text-body-2 font-regular">
          <td>{{ data.Name }}</td>
          <td>{{ data.DeliveryType }}</td>
          <td>{{data.DateCreated | date:'dd/MM/yyyy HH:mm'}}</td>
          <td>
            <span class="flex items-center">
              <i
                class="{{ data.Active ? 'tdsi-success-fill text-success-400':'tdsi-error-fill text-error-400' }} text-xl"></i>
            </span>
          </td>
          <td>
            <button tds-button-icon color="secondary" size="sm" class=" mr-2" [routerLink]="['/configs/delivery/edit']"
            [queryParams]="{id: data.Id}">
              <span class="flex items-center">
                <i class="tdsi-edit-fill text-neutral-1-500 text-xl leading-none"></i>
              </span>
            </button>
            <button tds-button-icon color="secondary" size="sm" (click)="onDeleteDelivery(data)">
              <span class="flex items-center">
                <i class="tdsi-trash-fill text-neutral-1-500 text-xl leading-none"></i>
              </span>
            </button>
          </td>
        </tr>
      </ng-template>
    </tbody>
  </tds-table>
 -->
