<div class="w-full h-full pb-4 px-4">
    <div class="flex flex-col w-full h-full bg-white rounded-xl">
        <div class="flex flex-row items-center justify-between px-4 py-3">
            <div class="flex flex-row items-center">
                <tds-avatar class="bg-primary-1 text-white" icon="tdsi-tag-fill"></tds-avatar>
                <span class="text-neutral-1-900 text-header-1 font-semibold pl-2.5">DANH SÁCH NHÃN HỘI THOẠI</span>
            </div>
            <div class="flex flex-row items-center justify-end w-1/2">
                <tds-form-field size='md' class="mr-4 w-1/2">
                    <input tdsInput class="text-neutral-1-900" placeholder="Tìm thẻ hội thoại" autocomplete="off" #filterText/>
                    <span tdsPrefix><i class="text-neutral-1-500 tdsi-search-fill"></i></span>
                    <span tdsSuffix (click)="onClearAll($event)">
                        <i class="tdsi-close-fill text-neutral-1-500 text-base" *ngIf="filterText.value && filterText.value != ''"></i>
                    </span>
                </tds-form-field>
                <button tds-button color="primary" (click)="showCreateModal()">
                    <span class="flex items-center">
                        <i class="tdsi-plus-circle-fill text-lg leading-none mr-2"></i>
                        <span class="text-body-2 font-semibold">Thêm mới</span>
                    </span>
                </button>
            </div>
        </div>
        <div class="flex flex-auto pb-2.5">
            <tds-table #basicTable [listData]="lstOfData" [showSizeChanger]="true" [frontPagination]="false" [loading]="isLoading" [scroll]="{y:'auto', x:'auto'}"
                [(pageSize)]="pageSize" [(pageIndex)]="pageIndex" [total]="count" (clickRefresh)="refreshData()" (queryParams)="onQueryParamsChange($event)">
                <thead>
                    <tr class="text-neutral-1-900 text-body-2 font-semibold">
                        <th [width]="'60px'" [align]="'center'">STT</th>
                        <th>Tên thẻ</th>
                        <th [align]="'center'">Màu sắc</th>
                        <th [align]="'center'">Lượt gán</th>
                        <th [align]="'center'">Trạng thái</th>
                        <th [align]="'center'">Thao tác</th>
                    </tr>
                </thead>
                <tbody>
                    <ng-template ngFor let-data let-i="index" [ngForOf]="basicTable.data">
                        <tr class="text-neutral-1-900 text-body-2 font-regular">
                            <td [align]="'center'">{{ 1 + i + (pageIndex - 1) * pageSize }}</td>
                            <td>{{ data.Name }}</td>
                            <td [align]="'center'">
                                <div class="flex items-center justify-center">
                                    <div class="w-16 h-6 rounded-full" [style.background-color]="data.ColorClassName"></div>
                                </div>
                            </td>
                            <td [align]="'center'"> 2 </td>
                            <td [align]="'center'">
                                <tds-switch [(ngModel)]="!data.IsDeleted" (ngModelChange)="updateStatus(data)"></tds-switch>
                            </td>
                            <td [align]="'center'" >
                                <button tds-button-icon color="secondary" size="sm" class="mr-2" (click)="showEditModal(data)">
                                    <span class="flex items-center">
                                      <i class="tdsi-edit-fill text-neutral-1-500 text-xl leading-none"></i>
                                    </span>
                                </button>
                                <button tds-button-icon color="secondary" size="sm" (click)="showRemoveModal(data)">
                                    <span class="flex items-center">
                                      <i class="tdsi-trash-fill text-neutral-1-500 text-xl leading-none"></i>
                                    </span>
                                </button>
                            </td>
                        </tr>
                    </ng-template>
                </tbody>
            </tds-table>
        </div>
    </div>
</div>
