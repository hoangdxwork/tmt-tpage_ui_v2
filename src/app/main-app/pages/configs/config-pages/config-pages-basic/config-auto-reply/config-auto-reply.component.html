<tds-spin [spinning]="isLoading">
  <form [formGroup]="_form">
    <div class="w-full h-full flex flex-col gap-y-4 ">
        <div>
            <span class="text-title-1 font-semibold">Cấu hình phản hồi tự động</span>
        </div>
        <div class="flex gap-x-2 items-center">
            <tds-switch formControlName="IsEnableAutoReplyComment" size="md"></tds-switch>
            <span class="">Phản hồi bình luận tự động?</span>
        </div>
        <div *ngIf="_form.value?.IsEnableAutoReplyComment"
            class="rounded-xl bg-neutral-3-50 flex flex-col w-full  gap-y-4 p-4">
            <div class="flex w-1/3 justify-start gap-x-2">
                <tds-switch formControlName="IsEnableAutoReplyMultiple" size="md"></tds-switch>
                <div class="flex flex-col w-full gap-y-2">
                    <span>Cho phép phản hồi nhiều lần</span>
                    <div class="flex flex-col w-full gap-y-2" *ngIf="_form.value?.IsEnableAutoReplyMultiple">
                        <span>
                          Số lần tối đa phản hồi/bài viết/người dùng
                          <span *ngIf="_form.value?.MaxForAutoReplyMultiple <= 0" class="text-neutral-1-400">
                            (Không áp dụng)
                          </span>
                        </span>
                        <tds-form-field class="w-full">
                        <tds-input-number [min]="0" [max]="1000000" [step]="1" formControlName="MaxForAutoReplyMultiple" [formatter]="numberWithCommas" [parser]="parserComas">
                        </tds-input-number>
                    </tds-form-field>
                    </div>
                </div>
            </div>
            <div class="flex gap-x-2 items-center">
                <tds-switch formControlName="IsEnableAutoReplyAllComment" size="md"></tds-switch>
                <span >Phản hồi tất cả bình luận</span>
            </div>
            <div class="flex flex-col gap-y-2" *ngIf="_form.value?.IsEnableAutoReplyAllComment">
                <div class="pl-3">
                    <div class="flex gap-x-2 items-center">
                        <tds-switch formControlName="IsEnableAutoNotReplyCommentWithPhone" size="md"></tds-switch>
                        <span>Không phản hồi bình luận có số điện thoại</span>
                    </div>
                </div>
                <tds-form-field class="p-3">
                    <tds-label>Không phản hồi nếu bình luận chứa nội dung:</tds-label>
                    <tds-select valueField="id" textField="name" formControlName="selectedWord3s"
                        placeholder='Nội dung bình luận' mode="tags" [maxTagCount]="10">
                    </tds-select>
                </tds-form-field>
            </div>
            <div class="flex gap-x-2 items-center" *ngIf="!_form.value?.IsEnableAutoReplyAllComment">
                <tds-switch formControlName="IsEnableAutoReplyCommentWithPhone" size="md"></tds-switch>
                <span>Phản hồi bình luận có điện thoại</span>
            </div>

            <div class="flex gap-x-2 items-center" *ngIf="!_form.value?.IsEnableAutoReplyAllComment">
                <tds-switch formControlName="IsEnableAutoReplyCommentWithEmail" size="md"></tds-switch>
                <span >Phản hồi bình luận có địa chỉ email</span>
            </div>
            <div class="flex flex-col gap-y-2" *ngIf="_form.value?.IsEnableAutoReplyComment && !_form.value?.IsEnableAutoReplyAllComment">
                <tds-form-field class="p-3">
                    <tds-label>Phản hồi nếu bình luận chứa nội dung bất kỳ:</tds-label>
                    <tds-select valueField="id" textField="name" formControlName="selectedWord2s"
                        placeholder='Nội dung bình luận' mode="tags" [maxTagCount]="10">
                    </tds-select>
                </tds-form-field>
            </div>
            <!-- Nội dung phản hồi -->
            <div>
                <tds-label>Nội dung phản hồi tự động:</tds-label>
                <!-- <textarea class="resize-none" tdsInput placeholder="Nhập nội dung" formControlName="ContentForAutoReplyWithComment"></textarea> -->
                <quill-editor [spellcheck]="false" placeholder="Nhập nội dung"
                 formControlName="ContentForAutoReplyWithComment" [modules]="quillTagHelpers" class="input-quill-editor"></quill-editor>
            </div>
            <!-- Phản hồi với tin nhắn -->
            <div class="flex gap-x-2 items-center">
                <tds-switch formControlName="IsEnableAutoReplyCommentInMessage" size="md"></tds-switch>
                <span>Phản hồi với tin nhắn?</span>
            </div>
            <div *ngIf="_form.value?.IsEnableAutoReplyCommentInMessage">
                <tds-label>Nội dung phản hồi với tin nhắn:</tds-label>
                <!-- <textarea class="resize-none" tdsInput placeholder="Nhập nội dung" formControlName="ContentForAutoReplyWithMessage"></textarea> -->
                <quill-editor [spellcheck]="false" placeholder="Nhập nội dung" formControlName="ContentForAutoReplyWithMessage" [modules]="quillTagHelpers" class="input-quill-editor"></quill-editor>
            </div>
        </div>

        <!-- Cho phép phản hồi tự động khi bình luận tạo đơn tự động không hợp lệ -->
        <div class="flex gap-x-2 items-center">
            <tds-switch formControlName="IsEnableAutoReplyCommentInNotIsValidToOrder" size="md"></tds-switch>
            <span class="">Cho phép phản hồi tự động khi bình luận tạo đơn tự động không hợp lệ</span>
        </div>

        <!-- Nội dung phản hồi tự động khi bình luận tạo đơn tự động không hợp lệ -->
        <div *ngIf="_form.value?.IsEnableAutoReplyCommentInNotIsValidToOrder">
            <tds-label> Nội dung phản hồi tự động khi bình luận tạo đơn tự động không hợp lệ:</tds-label>
            <quill-editor [spellcheck]="false" placeholder="Nhập nội dung"
            formControlName="ContentForAutoReplyCommentInNotIsValidToOrder" [modules]="notIsValidToOrderQuillTagHelpers" class="input-quill-editor"></quill-editor>
        </div>
    </div>
  </form>
</tds-spin>
