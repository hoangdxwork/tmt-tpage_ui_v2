<div class="w-full h-full bg-white rounded-xl pb-2">
  <div class="flex flex-col h-full">
    <div class="p-4 font-semibold text-xl flex gap-x-2 justify-end">
      <button tds-button type="button" color="info">
        <i class="tdsi-print-fill"></i>
        In danh sách
      </button>
      <tds-form-field>
        <input tdsInput placeholder="Tìm kiếm" autocomplete="off" (keyup.enter)="onSearch($event)"/>
        <span tdsPrefix><i class="text-neutral-1-500 tdsi-search-fill"></i></span>
      </tds-form-field>
      <!-- <order-filter-options (onLoadOption)="onLoadOption($event)"></order-filter-options> -->
    </div>

    <div class="h-full text-body-2 text-neutral-1-900">
      <tds-table #tableMessage
        [showSizeChanger]="true"
        [frontPagination]="false"
        [listData]="lstOfData"
        [scroll]="{y:'auto'}"
        [loading]="isLoading"
        [total]="count"
        [scroll]="{y:'auto'}"
        (clickRefresh)="refreshData()"
        (queryParams)="onQueryParamsChange($event)">
        <thead>
          <tr>
            <th [width]="'4%'">STT</th>
            <th [width]="'11%'">Mã đơn hàng</th>
            <th [width]="'11%'">Tên khách hàng</th>
            <th [width]="'11%'">Số điện thoại</th>
            <th [width]="'11%'">Tổng tiền</th>
            <th [width]="'11%'">Tổng sản phẩm chờ chốt</th>
            <th [width]="'11%'">Trạng thái</th>
            <th [width]="'11%'">Nhân viên</th>
            <th [width]="'11%'">Thời gian</th>
            <th [width]="'11%'">Thao tác</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let order of tableMessage.data; let index=index">
            <td>
              {{index + 1}}
            </td>

            <!-- Mã đơn hàng -->
            <td>
              {{order.Code}}
            </td>

            <!-- Tên khách hàng -->
            <td>
              {{order.PartnerName}}
            </td>

            <!-- Số điện thoại -->
            <td>
              {{order.Telephone}}
            </td>

            <!-- Tổng tiền -->
            <td>
              {{order.TotalAmount || 0 | number}}
            </td>

            <!-- Tổng sản phẩm chờ chốt -->
            <td>
              {{order.TotalAmount}}
            </td>

            <!-- Trạng thái -->
            <td>
              <tds-tag [status]="getColorStatusText(order.StatusText)" type="outline">
                {{ order.StatusText }}
              </tds-tag>
            </td>

            <!-- Nhân viên -->
            <td>
              {{order.UserName}}
            </td>

            <!-- Thời gian -->
            <td>
              {{order.DateCreated | date: 'dd/MM/yyyy HH:mm'}}
            </td>

            <!-- Thao tác -->
            <td>
              <div class="flex gap-x-2">
                <button tds-button-icon color="secondary" size="sm" (click)="openMiniChat(order)">
                  <span class="flex items-center">
                    <i class="tdsi-messenger-fill text-neutral-1-500"></i>
                  </span>
                </button>
                <button tds-button-icon color="secondary" size="sm" (click)="onEdit(order)">
                  <span class="flex items-center text-neutral-1-500">
                    <i class="tdsi-edit-fill"></i>
                  </span>
                </button>
                <button tds-button-icon color="secondary" size="sm" (click)="onRemove(order.Id, order.Code)">
                  <span class="flex items-center text-neutral-1-500">
                    <i class="tdsi-trash-fill"></i>
                  </span>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </tds-table>
    </div>
  </div>
  <tds-drawer [visible]="isOpenDrawer"
    [bodyStyle]="{'background-color':'rgb(235 237 239)','overflow':'hidden','display': 'flex','flex-direction': 'column','padding': '0'}"
    [placement]="'right'" [title]="titleMessage" (onClose)="closeDrawer()" [width]="'890px'">
    <ng-template #titleMessage>
      <span class="flex w-full items-center text-title-1 font-semibold text-neutral-900">
        Gửi tin nhắn Facebook
      </span>
    </ng-template>
    <ng-container *tdsDrawerContent>
      <div class="w-full h-full flex flex-col overflow-hidden text-body-2">
        <div class="w-full h-full flex overflow-hidden bg-neutral-3-200" cdkScrollable>
          <div *ngIf="currentConversation && currentMappingTeam?.team" class="w-full">
            <shared-tds-conversations class="flex w-full h-full" [team]="currentMappingTeam?.team"
              [data]="currentConversation" [type]="'all'">
            </shared-tds-conversations>
          </div>
        </div>
      </div>
    </ng-container>
  </tds-drawer>
</div>
