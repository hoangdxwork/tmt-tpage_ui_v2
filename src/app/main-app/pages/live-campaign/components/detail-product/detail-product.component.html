<div class="w-full h-full flex flex-col bg-white rounded-xl text-body-2 text-neutral-900">
  <div class="py-2.5 px-4 flex justify-end items-center">
    <tds-form-field class="w-1/4">
      <input aria-colspan="" class="placeholder-neutral-1-400" placeholder="Tìm kiếm" tdsInput />
      <span tdsPrefix><i class="text-neutral-1-500 tdsi-search-fill text-base"></i></span>
    </tds-form-field>
  </div>
  <div class="h-full pb-2.5">
    <tds-table #table class="table-vertical-line" [listData]="listOfData" showPagination="true" showSizeChanger="true">
      <thead>
        <tr>
          <th rowSpan="2" width="32px"></th>
          <th rowSpan="2">Tên sản phẩm</th>
          <th colSpan="4" class="text-center">Sản phẩm</th>
          <th colSpan="2" class="text-center">Đơn hàng</th>
          <th colSpan="2" class="text-center">Hóa đơn</th>
        </tr>
        <tr>
          <th>Tổng SL</th>
          <th>Chờ chốt</th>
          <th>Đã chốt</th>
          <th>Đã hủy</th>
          <th>Chờ chốt</th>
          <th>Đã hủy</th>
          <th>Đã chốt</th>
          <th>Đã hủy</th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngFor="let data of table.data">
          <tr>
            <td [expand]="expandSet.has(data.id)" (expandChange)="onExpandChange(data.id, $event)"></td>
            <td class="font-semibold">{{ data.name }}</td>
            <td>{{ data.age }}</td>
            <td>{{ data.age }}</td>
            <td>{{ data.age }}</td>
            <td>{{ data.age }}</td>
            <td>
              <div class="flex space-x-2 items-center">
                <div>{{ data.age }}</div>
                <div>
                  <button tds-button-icon color="secondary" size="sm"
                    class="cursor-default text-info-400 bg-transparent border-0 border-transparent focus:ring-0 focus:border-transparent focus:bg-info-100 hover:bg-info-100">
                    <span class="flex items-center">
                      <i class="tdsi-user-line"></i>
                    </span>
                  </button>
                </div>
              </div>
            </td>
            <td>{{ data.age }}</td>
            <td>
              <div class="flex space-x-2 items-center">
                <div>{{ data.age }}</div>
                <div>
                  <button tds-button-icon color="secondary" size="sm"
                    class="cursor-default text-info-400 bg-transparent border-0 border-transparent focus:ring-0 focus:border-transparent focus:bg-info-100 hover:bg-info-100">
                    <span class="flex items-center">
                      <i class="tdsi-user-line"></i>
                    </span>
                  </button>
                </div>
              </div>
            </td>
            <td>{{ data.age }}</td>
          </tr>
          <tr [expand]="expandSet.has(data.id)" class="bg-neutral-3-50">
            <div class="w-full bg-white rounded-md">
              <tds-tabset>
                <tds-tab title="Đơn hàng chờ chốt" clsContent="p-0">
                  <div class="w-full h-[240px]">
                    <tds-table #headerTable class="w-full h-full" [listData]="listOfData" showPagination="false" [showRefresh]="false" [scroll]="{y:'auto'}">
                      <thead>
                        <tr>
                          <th>Mã đơn hàng</th>
                          <th>Tên khách hàng</th>
                          <th>Số lượng sản phẩm</th>
                          <th>Ngày tạo</th>
                          <th>Trạng thái</th>
                          <th>
                            <button tds-button-icon color="secondary" size="sm">
                              <span class="flex items-center">
                                <i class="tdsi-reload-fill"></i>
                              </span>
                            </button>
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let data of headerTable.data">
                          <td>{{ data.name }}</td>
                          <td>{{ data.age }}</td>
                          <td>{{ data.age }}</td>
                          <td>{{ data.age }}</td>
                          <td>
                            <tds-tag status='secondary' size="sm" type="outline">Nhận</tds-tag>
                          </td>
                          <td>
                            <button tds-button color="primary" size="sm">Xem lịch sử</button>
                          </td>
                        </tr>
                      </tbody>
                    </tds-table>
                  </div>
                </tds-tab>
                <tds-tab title="Đơn hàng bị hủy & bị xóa" clsContent="p-0">
                  <div class="w-full h-[240px]">
                    <tds-table #headerTable class="w-full h-full" [listData]="listOfData" showPagination="false" [showRefresh]="false" [scroll]="{y:'auto'}">
                      <thead>
                        <tr>
                          <th>Mã đơn hàng</th>
                          <th>Tên khách hàng</th>
                          <th>Số lượng sản phẩm</th>
                          <th>Ngày tạo</th>
                          <th>Trạng thái</th>
                          <th>
                            <button tds-button-icon color="secondary" size="sm">
                              <span class="flex items-center">
                                <i class="tdsi-reload-fill"></i>
                              </span>
                            </button>
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let data of headerTable.data">
                          <td>{{ data.name }}</td>
                          <td>{{ data.age }}</td>
                          <td>{{ data.age }}</td>
                          <td>{{ data.age }}</td>
                          <td>
                            <tds-tag status='secondary' size="sm" type="outline">Nhận</tds-tag>
                          </td>
                          <td>
                            <button tds-button color="primary" size="sm">Xem lịch sử</button>
                          </td>
                        </tr>
                      </tbody>
                    </tds-table>
                  </div>
                </tds-tab>
                <tds-tab title="Hóa đơn đã chốt" clsContent="p-0">
                  <div class="w-full h-[240px]">
                    <tds-table #headerTable class="w-full h-full" [listData]="listOfData" showPagination="false" [showRefresh]="false" [scroll]="{y:'auto'}">
                      <thead>
                        <tr>
                          <th>Số hóa đơn</th>
                          <th>Tên khách hàng</th>
                          <th>Số lượng sản phẩm</th>
                          <th>Ngày tạo</th>
                          <th>Trạng thái</th>
                          <th>
                            <button tds-button-icon color="secondary" size="sm">
                              <span class="flex items-center">
                                <i class="tdsi-reload-fill"></i>
                              </span>
                            </button>
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let data of headerTable.data">
                          <td>
                            <div class="text-info-400 font-semibold">
                              {{ data.name }}
                            </div>
                          </td>
                          <td>{{ data.age }}</td>
                          <td>{{ data.age }}</td>
                          <td>{{ data.age }}</td>
                          <td>
                            <tds-tag status='secondary' size="sm" type="outline">Nhận</tds-tag>
                          </td>
                          <td>
                            <button tds-button color="primary" size="sm">Xem lịch sử</button>
                          </td>
                        </tr>
                      </tbody>
                    </tds-table>
                  </div>
                </tds-tab>
                <tds-tab title="Hóa đơn bị hủy & bị xóa" clsContent="p-0">
                  <div class="w-full h-[240px]">
                    <tds-table #headerTable class="w-full h-full" [listData]="listOfData" showPagination="false" [showRefresh]="false" [scroll]="{y:'auto'}">
                      <thead>
                        <tr>
                          <th>Số hóa đơn</th>
                          <th>Tên khách hàng</th>
                          <th>Số lượng sản phẩm</th>
                          <th>Ngày tạo</th>
                          <th>Trạng thái</th>
                          <th>
                            <button tds-button-icon color="secondary" size="sm">
                              <span class="flex items-center">
                                <i class="tdsi-reload-fill"></i>
                              </span>
                            </button>
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let data of headerTable.data">
                          <td>
                            <div class="text-info-400 font-semibold">
                              {{ data.name }}
                            </div>
                          </td>
                          <td>{{ data.age }}</td>
                          <td>{{ data.age }}</td>
                          <td>{{ data.age }}</td>
                          <td>
                            <tds-tag status='secondary' size="sm" type="outline">Nhận</tds-tag>
                          </td>
                          <td>
                            <button tds-button color="primary" size="sm" (click)="showModal()">Xem lịch sử</button>
                          </td>
                        </tr>
                      </tbody>
                    </tds-table>
                  </div>
                </tds-tab>
              </tds-tabset>
            </div>
          </tr>
        </ng-container>
      </tbody>
    </tds-table>
  </div>
</div>

<tds-modal [(visible)]="isVisible" title="Lịch sử giỏ hàng" size="lg"
    (onCancel)="handleCancel()" [footer]="modalFooter">
    <ng-container *tdsModalContent>
      <tds-timeline>
        <tds-timeline-item [tdsDot]="dotTemplate">
          <div class="px-6 py-4 mb-8 w-full border rounded-xl flex justify-between">
            <div class="flex space-x-8">
              <div class="flex items-center">
                <img src="assets/images/live-campaign/detail-product-modal.svg" alt="">
              </div>
              <div class="flex flex-col space-y-3">
                <div class="text-body-1 text-neutral-1-600">31/05/2022, 9:40 AM</div>
                <div class="text-header-1 font-semibold">Thêm sản phẩm</div>
              </div>
            </div>
            <div class="flex items-center text-info-400 text-title-1 font-semibold">Số lượng: 2</div>
          </div>
        </tds-timeline-item>
        <tds-timeline-item [tdsDot]="dotTemplate">
          <div class="px-6 py-4 mb-8 w-full border rounded-xl flex justify-between">
            <div class="flex space-x-8">
              <div class="flex items-center">
                <img src="assets/images/live-campaign/detail-product-modal.svg" alt="">
              </div>
              <div class="flex flex-col space-y-3">
                <div class="text-body-1 text-neutral-1-600">31/05/2022, 9:40 AM</div>
                <div class="text-header-1 font-semibold text-error-400">Bỏ sản phẩm ra khỏi giỏ hàng</div>
              </div>
            </div>
            <div class="flex items-center text-info-400 text-title-1 font-semibold">Số lượng: 2</div>
          </div>
        </tds-timeline-item>
        <tds-timeline-item [tdsDot]="dotTemplate">
          <div class="px-6 py-4 w-full border rounded-xl flex justify-between">
            <div class="flex space-x-8">
              <div class="flex items-center">
                <img src="assets/images/live-campaign/detail-product-modal.svg" alt="">
              </div>
              <div class="flex flex-col space-y-3">
                <div class="text-body-1 text-neutral-1-600">31/05/2022, 9:40 AM</div>
                <div class="text-header-1 font-semibold text-success-400">Đã chốt</div>
              </div>
            </div>
            <div class="flex items-center text-info-400 text-title-1 font-semibold">Số lượng: 2</div>
          </div>
        </tds-timeline-item>
      </tds-timeline>
      <ng-template #dotTemplate>
        <div class="h-6 w-6 rounded-full border border-neutral-2-100 bg-transparent"></div>
      </ng-template>
    </ng-container>
    <ng-template #modalFooter>
      <div class="flex justify-end p-4">
        <button tds-button color="secondary" class="min-w-[100px]" (click)="handleCancel()">
            Đóng
        </button>
    </div>
  </ng-template>
</tds-modal>
