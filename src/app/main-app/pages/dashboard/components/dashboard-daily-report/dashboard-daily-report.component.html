<tds-spin [spinning]="isLoading">
    <div class="bg-white flex flex-col gap-x-4 rounded-xl px-4 text-body-2 text-neutral-1-900">
        <div class="flex flex-row items-center justify-between py-4">
            <span class=" text-header-1 font-semibold font-sans">Thống kê trong ngày</span>
            <button class="bg-primary-3 text-primary-1 h-[34px] w-[34px] flex items-center justify-center rounded-xl"
                (click)="refreshData()">
                <span class="flex items-center">
                    <i class="tdsi-reload-fill"></i>
                </span>
            </button>
        </div>
        <div class="flex flex-col gap-y-4 items-center" *ngIf="(!emptyData && data);else emptyTmp">
            <div class="flex flex-row items-center justify-center w-full">
                <div class="flex flex-col justify-center w-full">
                    <span class="text-neutral-1-500  font-regular text-left font-sans py-2 flex items-center">
                        <i class="tdsi-comment-on-fill text-body-1 leading-none mr-2"></i>Hội thoại
                    </span>
                    <div class="flex flex-row items-center">
                        <span class="text-header-1 font-semibold font-sans pr-2">{{ data?.Current?.Conversations?.Total || 0 | numberCustom}}</span>
                        <tds-tag [status]="data?.Percent?.Conversation >= 0 ? 'primary': 'error'" class="inline-flex cursor-pointer"
                            type="outline" tds-tooltip="Dữ liệu trước đó: {{data?.Previous?.Conversations?.Total}}">
                            {{ data?.Percent?.Conversation >= 0 ? data?.Percent?.Conversation : -1 * data?.Percent?.Conversation }}%
                            <span [class]="data?.Percent?.Conversation >= 0 ? 'tdsi-chart-up-line':'tdsi-chart-down-line'"></span>
                        </tds-tag>
                    </div>
                </div>
                <div class="flex flex-col justify-center w-full">
                    <span class="text-neutral-1-500  font-regular text-left font-sans py-2 flex items-center">
                        <i class="tdsi-email-fill text-body-1 leading-none mr-2"></i>Tin nhắn mới
                    </span>
                    <div class="flex flex-row items-center">
                        <span class="text-header-1 font-semibold font-sans pr-2">{{data?.Current?.Messages?.MessageTotal || 0 | numberCustom }}</span>
                        <tds-tag [status]="data?.Percent?.Message >= 0 ? 'primary': 'error'" class="inline-flex cursor-pointer"
                            type="outline" tds-tooltip="Dữ liệu trước đó: {{ data?.Previous?.Messages?.MessageTotal }}">
                            {{ data?.Percent?.Message >= 0 ? data?.Percent?.Message : -1 * data?.Percent?.Message }}%
                            <span [class]="data?.Percent?.Message >= 0 ? 'tdsi-chart-up-line':'tdsi-chart-down-line'"></span>
                        </tds-tag>
                    </div>
                </div>
                <div class="flex flex-col justify-center w-full">
                    <span class="text-neutral-1-500  font-regular text-left font-sans py-2 flex items-center">
                        <i class="tdsi-comment-fill text-body-1 leading-none mr-2"></i>Bình luận mới
                    </span>
                    <div class="flex flex-row items-center">
                        <span class="text-header-1 font-semibold font-sans pr-2">{{data?.Current?.Messages?.CommentTotal || 0 | numberCustom }}</span>
                        <tds-tag [status]="data?.Percent?.Comment >= 0 ? 'primary': 'error'" class="inline-flex cursor-pointer"
                            type="outline" tds-tooltip="Dữ liệu trước đó: {{ data?.Previous?.Messages?.CommentTotal }}">
                            {{ data?.Percent?.Comment >= 0 ? data?.Percent?.Comment : -1 * data?.Percent?.Comment }}%
                            <span [class]="data?.Percent?.Comment >= 0 ? 'tdsi-chart-up-line':'tdsi-chart-down-line'"></span>
                        </tds-tag>
                    </div>
                </div>
            </div>
            <div class="w-full pb-6" *ngIf="dailyOption">
                <div echarts [options]="dailyOption" [size]="['auto', 300]"></div>
            </div>
        </div>
    </div>
    <ng-template #emptyTmp>
        <app-dashboard-empty-data></app-dashboard-empty-data>
    </ng-template>
</tds-spin>