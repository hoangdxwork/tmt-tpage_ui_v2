<!-- Bài post Facebook lấy dto từ ChatomniObjectsItemDto với Data: Facebook_Graph_Post-->
<div *ngIf="typeNumber == 12 && team?.Type == 'Facebook'" class="post-block mb-3 bg-white flex flex-col">
    <div class="post-body flex flex-row justify-between p-4">
        <div class="post-content flex flex-col">
            <div class="post-type flex flex-row items-center mb-3">
                <tds-avatar
                    [tdsSrc]="(data.Data | facebookType)?.status_type == 'added_video' ? '../../../assets/imagesv2/conversation/live-circle.svg' : '../../../assets/imagesv2/conversation/facebook-circle.svg'"
                    [size]="24" [shape]="'circle'" [isAvatar]="false" class="mr-1">
                </tds-avatar>
                <tds-tag [status]="(data.Data | facebookType)?.status_type=='added_video'?'error':'info'" type="outline" rounded="rounded-full">
                    <span class="flex items-center py-0.5">
                        <span>{{(data.Data | facebookType)?.created_time | date: "dd-MM-yyyy HH:mm"}}</span>
                    </span>
                </tds-tag>
            </div>
            <div class="post-item">
                <div class="w-full block">
                    <p class="story font-semibold" *ngIf="(data.Data | facebookType)?.story">
                        {{(data.Data | facebookType)?.story}}
                    </p>
                    <div class="message font-regular" *ngIf="(data.Data | facebookType)?.message">
                        <div [innerHTML]="(data.Data | facebookType)!.message | safeHtml"></div>
                    </div>
                    <p class="description" *ngIf="(data.Data | facebookType)?.description">{{(data.Data | facebookType)?.description}}</p>
                </div>
            </div>
        </div>
        <div class="post-picture" *ngIf="(data.Data | facebookType)?.picture && !checkPostPictureError(item)">
            <img (error)="errorPostPicture(item)"
                [src]="(data.Data | facebookType)?.picture"
                alt="{{(data.Data | facebookType)?.story}}" class="rounded-xl"/>
        </div>
    </div>
    <div class="post-footer bg-neutral-3-50 text-neutral-1-600 font-regular flex flex-row items-center justify-between py-1 px-4">
        <div class="emotion-count flex flex-row items-center">
            <div class="flex flex-row mr-1 sticky">
                <img src="../../../assets/imagesv2/conversation/like-circle.svg" width="20px" height="20px"
                    class="rounded-full z-50">
                <img src="../../../assets/imagesv2/conversation/love-circle.svg" width="20px" height="20px"
                    class="rounded-full z-40 -ml-2">
            </div>
            <span>
                {{(data.Data | facebookType)?.reactions?.summary?.total_count || 0}}
            </span>
        </div>
        <div class="comment flex flex-row items-center">
            <span class="comment-count  mr-4">
                {{(data.Data | facebookType)?.comments?.summary?.total_count || 0}} Bình luận
            </span>
            <div class="comment-button">
                <button tds-button-flat-icon color="secondary" class="mr-4" tds-tooltip tooltipTitle="Bài viết tổng quan" tooltipPlacement="bottom"
                    (click)="openModalPost(item)">
                    <i class="tdsi-chart-pie-fill"></i>
                </button>
                <button tds-button-flat-icon color="secondary" class="mr-4" tds-tooltip tooltipTitle="Đi tới bình luận" tooltipPlacement="bottom"
                    (click)="openPost(item, 'post')">
                    <i class="tdsi-expand-line"></i>
                </button>
                <button tds-button-flat-icon color="secondary"  tds-tooltip tooltipTitle="Đi tới bài viết" tooltipPlacement="bottom">
                    <a [href]="(data.Data | facebookType)?.permalink_url" target="_blank">
                        <i class="tdsi-search-line"></i>
                    </a>
                </button>
            </div>
        </div>
    </div>
</div>

 <!-- Bài post TShop lấy dto từ ChatomniObjectsItemDto với Data: ChatomniDataTShopPostDto-->
<div *ngIf="typeNumber == 91 && team?.Type == 'TShop'" class="post-block mb-3 bg-white flex flex-col">
    <div class="post-body flex flex-row justify-between p-4">
        <div class="post-content flex flex-col">
            <div class="post-type flex flex-row items-center mb-3">
                <tds-avatar 
                    [ngClass]="(data.Data | tshopType)?.Kind =='LIVE' ? 'bg-error-400': ' bg-base-blue-500'"
                    
                    [icon]="(data.Data | tshopType)?.Kind =='LIVE' ? 'tdsi-video-camera-fill': 'tdsi-template-web-fill'"
                    [size]="24"
                    [shape]="'circle'"
                    class="mr-1 text-white">
                </tds-avatar>
                <tds-tag [status]="(data.Data | tshopType)?.Kind=='LIVE' ? 'error' : 'info'" type="outline" rounded="rounded-full">
                    <span class="flex items-center py-0.5">
                        <span>{{data.ChannelCreatedTime | date: "dd-MM-yyyy HH:mm"}}</span>
                    </span>
                </tds-tag>
            </div>
            <div class="post-item">
                <div class="w-full block">
                    <span *ngIf="data.StatusLive == 1" class="w-full font-semibold truncate text-base-red-600">Đang phát trực tiếp</span>
                    <span *ngIf="data.StatusLive != 1 && (data.Data | tshopType).KindValue == 1" class="w-full font-semibold truncate">Đã phát trực tiếp</span>
                    <span *ngIf="data.StatusLive != 1 && (data.Data | tshopType).KindValue != 1" class="w-full font-semibold truncate text-base-blue-600">Đã đăng một bài viết</span>

                    <p class="description" *ngIf="data?.Description">{{data.Description}}</p>
                </div>
            </div>
        </div>

        <!-- Hình ảnh -->
        <div class="post-picture" *ngIf="data?.Thumbnail && !checkPostPictureError(item); else noPicture">
            <div *ngIf="data.Thumbnail; else noPicture" class="rounded-lg">
                <img  [src]="data.Thumbnail?.Url"
                    [width]="120" [height]="88" (error)="errorPostPicture(item)"
                    class="max-w-[120px] max-h-[88px] w-[120px] h-[88px] rounded-md  object-cover">
            </div>
        </div>

        <ng-template #noPicture>
            <div *ngIf="!data.Thumbnail && data.StatusLive != 1 && (data.Data | tshopType).KindValue != 1; else noPictureLive">
                <img src="../../../assets/imagesv2/conversation-post-img.svg" alt=""
                    class="max-w-[120px] w-[120px] max-h-[88px] h-[88px] rounded-md p-4 bg-neutral-3-50">
            </div>
            <ng-template #noPictureLive>
                <div  *ngIf="checkPostPictureError(item)"> 
                    <img src="../../../assets/imagesv2/errorPic.svg" alt=""
                        class="max-w-[120px] w-[120px] max-h-[88px] h-[88px] rounded-md p-4 bg-neutral-3-50">
                </div>
            </ng-template>
        </ng-template>

    </div>
    <div class="post-footer bg-neutral-3-50 text-neutral-1-600 font-regular flex flex-row items-center justify-between py-1 px-4">
        <div class="emotion-count flex flex-row items-center">
            <div class="flex flex-row mr-1 sticky">
                <img src="../../../assets/imagesv2/conversation/like-circle.svg" width="20px" height="20px"
                    class="rounded-full z-50">
                <img src="../../../assets/imagesv2/conversation/love-circle.svg" width="20px" height="20px"
                    class="rounded-full z-40 -ml-2">
            </div>
        </div>
        <div class="comment flex flex-row items-center">
            <div class="comment-button">
                <button tds-button-flat-icon color="secondary" tds-tooltip tooltipTitle="Đi tới bình luận" tooltipPlacement="bottom"
                    (click)="openPost(item, 'post')">
                    <i class="tdsi-expand-line"></i>
                </button>
            </div>
        </div>
    </div>
</div>
