<div *ngIf="dataItem && team" class="px-2 desktop:text-body-2 text-caption-2">
	<!--L·ªçc theo Messages-->
	<div *ngIf="dataItem.Type == 11" class="{{dataItem.IsOwner ? 'is_admin' : 'is_client'}}" [ngClass]="dataItem.IsShowAvatar? '!mt-0': '!my-0.5'">

      <!-- webhook_attachments template s·∫£n ph·∫©m -->
      <div *ngIf="dataItem.Type == 11 && (dataItem.Data | facebookDataCs) &&
          (dataItem.Data | facebookDataCs).webhook_attachments && (dataItem.Data | facebookDataCs).webhook_attachments.length > 0">
          <div *ngFor="let wb of (dataItem.Data | facebookDataCs).webhook_attachments">
              <div *ngIf="wb.type == 'template' && wb.payload" class="w-full overflow-x-hidden">
                <div *ngIf=" wb.payload.template_type == 'generic'" class="w-full flex justify-end items-center relative">
                  <div id="scroll-product{{dataItem.Data.id}}" class="max-w-[85%] flex gap-6 snap-x snap-mandatory overflow-x-auto no-scrollbar scroll-product">
                    <div *ngFor="let item of wb?.payload?.elements">
                      <div #itemProduct class="snap-start shrink-0">
                        <tds-card class="bg-white w-[260px] h-full rounded-xl" (click)="detail()">
                          <div *ngIf="item?.image_url && !checkPostPictureError(item); else noPicture" class="relative">
                            <img src="{{ item.image_url }}" alt="" (error)="errorPostPicture(item)" class="w-full h-[192px] object-cover">
                          </div>
                          <ng-template #noPicture>
                            <img src="../assets/imagesv2/errorPic.svg" alt="" class="w-full h-[192px] rounded-md p-4">
                          </ng-template>
                          <tds-card-content class="px-4 py-3 w-full flex flex-col gap-y-1">
                            <span class="desktop:text-caption-1 text-[11px] font-semibold text-left w-full truncate" tooltipPlacement="topLeft" tds-tooltip="{{ item?.title }}">{{ item?.title }}</span>
                            <span class="desktop:text-caption-1 text-[11px] text-neutral-1-400 text-left">{{ item?.subtitle || "---" }}</span>
                          </tds-card-content>
                        </tds-card>
                      </div>
                    </div>
                  </div>
                  <div [ngClass]="wb?.payload?.elements?.length > 2 ? 'flex' : 'hidden'" class="w-[85%] h-[40px] px-2 justify-between items-center absolute z-1">
                    <button tds-button-icon color="secondary" rounded="!rounded-full" (click)="previous(dataItem.Data.id)">
                      <i class="tdsi-arrow-left-line text-neutral-1-400"></i>
                    </button>
                    <button tds-button-icon color="secondary" rounded="!rounded-full" (click)="next(dataItem.Data.id)">
                      <i class="tdsi-arrow-right-line text-neutral-1-400"></i>
                    </button>
                  </div>
                </div>

                <div *ngIf="wb.payload.template_type == 'receipt'" class="w-full flex justify-end py-2">
                  <div class="px-4 py-2 bg-primary-1 text-white rounded-l-xl rounded-t-xl">
                    H√≥a ƒë∆°n c·ªßa b·∫°n  üëá
                  </div>
                </div>

                <div *ngIf="wb.payload.template_type == 'receipt'" class="w-full flex justify-end desktop:text-body-2 text-caption-2">
                  <div class="flex flex-col w-[50%]">
                    <div class="bg-neutral-3-50 rounded-t-xl px-4 py-2 flex justify-between items-center">
                      <span class="text-neutral-1-600">X√°c nh·∫≠n ƒë∆°n ƒë·∫∑t h√†ng</span>
                      <span class="desktop:text-title-1 text-caption-1 font-semibold">{{ wb?.payload?.recipient_name || "N/A"}}</span>
                    </div>
                    <div class="w-full bg-white px-4 rounded-b-xl">
                      <div class="pt-2 pb-3 border-b border-neutral-3-200 flex flex-col w-full items-start">
                        <div class="flex flex-col gap-3 w-full">
                          <div class="flex w-full gap-x-2.5" *ngFor="let item of wb?.payload?.elements">
                            <img *ngIf="item?.image_url && !checkPostPictureError(item); else noPicture" src="{{ item.image_url }}" alt="" (error)="errorPostPicture(item)" class="rounded-lg bg-neutral-3-50 h-[60px] w-[60px]">
                            <ng-template #noPicture>
                              <img src="../assets/imagesv2/errorPic.svg" alt="" class="rounded-lg bg-neutral-3-50 h-[60px] w-[60px] p-4">
                            </ng-template>

                            <div class="flex flex-col flex-auto gap-y-1 items-start desktop:text-body-2 text-caption-2">
                              <div class="font-semibold text-left w-full truncate" tooltipPlacement="topLeft" tds-tooltip="{{ item?.title }}">{{ item?.title || "---" }}</div>
                              <div class="flex gap-x-2">
                                <span class="text-neutral-1-600">S·ªë l∆∞·ª£ng: <span class="text-primary-2 font-semibold">{{ item?.quantity || '___' }}</span></span>
                                <span>-</span>
                                <span class="text-neutral-1-600">ƒê∆°n gi√°: <span class="text-primary-2 font-semibold">{{ item?.price || '___' | numberCustom }}</span></span>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="mt-4 flex w-full">
                          <span *ngIf="wb?.payload?.order_number != null && wb?.payload?.order_number != 'Unknown'" class="flex flex-col w-1/2 text-left">
                            <span class="desktop:text-caption-1 text-[11px]">M√£ ƒë∆°n h√†ng</span>
                            <a *ngIf="wb?.payload?.url == null" class="mt-1 text-body-2 text-primary-1 font-semibold">{{ wb?.payload?.order_number }}</a>
                            <a *ngIf="wb?.payload?.url != null" class="mt-1 text-body-2 text-primary-1 font-semibold" href="{{wb?.payload?.url}}">{{ wb?.payload?.order_number }}</a>
                          </span>
                          <div class="flex flex-col w-1/2 text-left">
                            <span class="text-neutral-1-600 desktop:text-caption-1 text-[11px]">ƒê√£ thanh to√°n b·∫±ng</span>
                            <span class="mt-1 text-body-2">{{ wb?.payload?.payment_method || '---' }}</span>
                          </div>
                        </div>
                        <span class="mt-2 text-neutral-1-600 desktop:text-caption-1 text-[11px]">ƒê·ªãa ch·ªâ giao h√†ng</span>
                        <span class="mt-1 text-body-2 text-left">{{ wb?.payload?.address?.street_1 || '---' }}</span>
                      </div>
                      <div class="py-2 flex justify-between items-center">
                        <span class="text-neutral-1-600 desktop:text-body-2 text-caption-2 font-semibold">T·ªïng ti·ªÅn</span>
                        <span class="text-title-1 font-semibold">{{ wb?.payload?.summary?.subtotal || 0 | numberCustom }}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
          </div>
      </div>

      <div class="chat-body w-full" [ngClass]="dataItem.IsShowAvatar? '': '!my-2 pl-9'">
          <div *ngIf="!dataItem.IsOwner " class="mr-2 flex flex-col justify-end">

            <div *ngIf="dataItem.Type == 11 && (dataItem.Data | facebookType)">
                <tpage-avatar-facebook *ngIf="dataItem.IsShowAvatar" [shape]="'circle'" [size]="36"
                    [psid]="(dataItem.Data | facebookType)?.from?.id" [token]="team.ChannelToken">
                </tpage-avatar-facebook>
            </div>
          </div>

          <!-- Tin nh·∫Øn vƒÉn b·∫£n -->
          <div *ngIf="dataItem.MessageFormatted || dataItem.Message" class="message-inner {{dataItem.Error ? 'error' : ''}}" tds-tooltip tooltipTitle="{{dataItem.ChannelCreatedTime | date:'dd'}}/{{dataItem.ChannelCreatedTime | date:'MM'}} {{dataItem.ChannelCreatedTime | date:'HH:mm'}}">
            <div class="text-left hidden" [innerHtml]="(dataItem.MessageFormatted || dataItem.Message) | jsonPayload | formatIconLike | bbcodeConvert | safeHtml" #contentMessage></div>
            <div showMore [isMessageItem]="true" [length]="640" [text]="dataItem.MessageFormatted || dataItem.Message" [searchText]="searchText" class="text-left" ></div>
          </div>

          <!-- Tin nh·∫Øn h√¨nh ·∫£nh facebook -->
		      <!-- 1 h√¨nh -->
		      <div *ngIf="dataItem.Data && dataItem.Data?.attachments && dataItem.Data.attachments?.data!.length == 1" class="flex flex-wrap max-w-[225px]">
              <div *ngFor="let att of dataItem.Data.attachments.data" [ngClass]="dataItem.IsOwner ? 'flex-row' : 'flex-row-reverse'"
                  class="p-0.5 flex gap-x-2 justify-center items-center">

                  <a class="flex items-center" [ngClass]="reloadingImage ? 'cursor-wait' : 'cursor-pointer'" tds-tooltip tooltipTitle="T·∫£i l·∫°i"
                      *ngIf="dataItem.Data!.is_error_attachment" (click)="refreshAttachment(att)">
                      <span class="tdsi-reload-fill text-primary-1 text-body-1 leading-none"></span>
                  </a>
                  <a *ngIf="att.image_data" (click)="open_gallery(att)" class="relative">
                      <show-attachment class="w-full h-full" [type]="att.mime_type" [height]="'225px'" [url]="att.image_data.url" (onError)="isErrorAttachment(att, dataItem)">
                      </show-attachment>
                      <div class="absolute inset-0" tds-tooltip tooltipTitle="·∫¢nh ƒë√£ h·∫øt h·∫°n" *ngIf="dataItem.Data!.is_error_attachment"></div>
                  </a>
                  <a *ngIf="att.video_data" (click)="open_gallery(att)">
                      <show-attachment [type]="att.mime_type" [url]="att.video_data?.url" (onError)="isErrorAttachment(att, dataItem)"
                          [width]="'320px'" [height]="'240px'" [isMuted]="false">
                      </show-attachment>
                  </a>
                  <a *ngIf="att.file_url" container="body" (click)="open_gallery(att)">
                      <show-attachment [type]="att.mime_type" [url]="att.file_url" (onError)="isErrorAttachment(att, dataItem)">
                      </show-attachment>
                  </a>

              </div>
          </div>

		      <!-- Nhi·ªÅu h√¨nh -->
          <div *ngIf="dataItem.Data && dataItem.Data?.attachments && dataItem.Data.attachments?.data!.length > 1" class="flex flex-wrap w-[327px]">
              <div *ngFor="let att of dataItem.Data.attachments.data" class="p-0.5"  [ngClass]="dataItem.Data.attachments.data.length == 2 ? 'w-1/2' : 'w-1/3'">
                  <div class="w-full relative" [ngStyle]="{'padding-top.%': 100}">

                      <a *ngIf="att.image_data" (click)="open_gallery(att)" class="absolute inset-0 w-full h-full flex">
                          <show-attachment class="w-full h-full" [type]="att.mime_type" [url]="att.image_data.url" (onError)="isErrorAttachment(att, dataItem)">
                          </show-attachment>
                      </a>
                      <a *ngIf="att.video_data" (click)="open_gallery(att)" class="absolute inset-0 w-full h-full flex">
                          <show-attachment [type]="att.mime_type" [url]="att.video_data?.url"  (onError)="isErrorAttachment(att, dataItem)"
                          [width]="'320px'" [height]="'240px'" [isMuted]="false"></show-attachment>
                      </a>
                      <a *ngIf="att.file_url" container="body" (click)="open_gallery(att)" class="absolute inset-0 w-full h-full flex">
                          <show-attachment [type]="att.mime_type" [url]="att.file_url" (onError)="isErrorAttachment(att, dataItem)">
                          </show-attachment>
                      </a>
                  </div>
              </div>
          </div>

          <div *ngIf="dataItem.Data && dataItem.Data?.attachments && this.isShowItemImage == true">
              <show-item-image [lstImage]="listAtts" [team]="team" [data]="dataItem" [name]="name" [imageClick]="imageClick"
                  (closeShowItemImage)="onCloseShowItemImage($event)">
              </show-item-image>
          </div>

          <!-- Tin nh·∫Øn kh√¥ng t·∫£i ƒë∆∞·ª£c -->
          <div *ngIf="!dataItem.Message && !dataItem.Data?.attachments && dataItem.Type == 11" class="message-inner text-left !text-accent-3 !bg-accent-3 !bg-opacity-20"
              tds-tooltip tooltipTitle="{{dataItem.ChannelCreatedTime | yiDateTimeFormat}}">
              Kh√¥ng t·∫£i ƒë∆∞·ª£c tin nh·∫Øn!
          </div>

          <!-- Tin nh·∫Øn l·ªói -->
          <div *ngIf="(dataItem.Error && dataItem.Error!.Message) || dataItem.Status == 2" class="select-message flex items-center">

              <!-- G·ª≠i l·∫°i tin nh·∫Øn l·ªói -->
              <a class="flex items-center cursor-pointer" *ngIf="checkErrorMessage(dataItem.Error? dataItem.Error.Message: '')" tds-tooltip
                tooltipContentCss="rounded-md p-2 bg-warning-300 text-neutral-1-900  bg-opacity-90" tooltipArrowCss="border-4 border-warning-300"
                tooltipTitle="C·∫£nh b√°o: Nguy c∆° b·ªã facebook ƒë√°nh gi√° spam t√†i kho·∫£n n·∫øu s·ª≠ d·ª•ng ch·ª©c nƒÉng n√†y nhi·ªÅu l·∫ßn" (click)="retryMessage()">
                  <span class="tdsi-reload-fill text-primary-1 text-body-1 leading-none"></span>
              </a>

              <!-- Th√¥ng b√°o tin nh·∫Øn l·ªói -->
              <a class="flex items-center cursor-pointer ml-2" *ngIf="dataItem.Error?.Message" tds-popover [popoverContent]="popoverBug">
                  <span class="tdsi-info-line text-error-400 text-body-1 leading-none" ></span>
              </a>

              <ng-template #popoverBug>
                  <div class="max-w-[336px] text-body-2 text-neutral-1-900">{{dataItem.Error? dataItem.Error.Message: ''}}</div>
              </ng-template>
          </div>

          <!-- admin copy tin nh·∫Øn g·ª≠i l·∫°i-->
          <a class="flex items-center cursor-pointer ml-2" *ngIf="dataItem.Data!.has_admin_required" tds-tooltip tooltipTitle="Sao ch√©p" (click)="copyMessage()">
              <span class="tdsi-copy-line  text-body-1 leading-none"></span>
          </a>

          <!-- Ch·ªçn s·ªë ƒëi·ªán tho·∫°i, ƒë·ªãa ch·ªâ, ghi ch√∫ -->
          <div *ngIf="!dataItem.Data.attachments" class="select-icon">
              <div class="select-order flex flex-row items-center w-fit h-full px-3">

                  <span tds-tooltip tooltipTitle="Ch·ªçn l√†m s·ªë ƒëi·ªán tho·∫°i"  (click)="selectOrder('phone')"
                      class="h-5 w-5 bg-base-green-400 flex items-center justify-center rounded-md cursor-pointer mr-1.5">
                      <span class="tdsi-call-fill text-md text-white"></span>
                  </span>

                  <span tds-tooltip tooltipTitle="Ch·ªçn l√†m ƒë·ªãa ch·ªâ" (click)="selectOrder('address', undefined, dataItem.NlpEntities)"
                      class="h-5 w-5 bg-base-orange-500 flex items-center justify-center rounded-md cursor-pointer mr-1.5">
                      <span class="tdsi-pin-fill text-md text-white"></span>
                  </span>

                  <span tds-tooltip tooltipTitle="Th√™m v√†o ghi ch√∫" (click)="selectOrder('note')"
                      class="h-5 w-5 bg-base-blue-500 flex items-center justify-center rounded-md cursor-pointer">
                      <span class="tdsi-note-2-fill text-md text-white"></span>
                  </span>

              </div>
          </div>
      </div>

      <!-- ƒêang g·ª≠i -->
      <span *ngIf="dataItem.Status == 0" class="chat-by desktop:!text-caption-2 !text-[10px] mr-2">
          <span class="tdsi-send-fill"></span> ƒêang g·ª≠i... <span *ngIf="dataItem.CreatedBy"> b·ªüi <span class="text-info-500">{{dataItem.CreatedBy?.Name}}</span></span>
      </span>

      <!-- Ng∆∞·ªùi g·ª≠i -->
      <span *ngIf="(dataItem.Error && dataItem.Error?.Message) || dataItem.Status == 2 ; else seenBy">
          <span *ngIf="checkErrorMessage(dataItem.Error? dataItem.Error.Message: '')" class="desktop:text-caption-2 text-[10px] text-neutral-1-400 gap-x-1 flex justify-end">
              <span class="tdsi-info-line flex items-center"></span>Tin nh·∫Øn ch∆∞a ƒë∆∞·ª£c g·ª≠i
          </span>
      </span>
      <ng-template #seenBy>
          <span *ngIf="dataItem.CreatedBy && dataItem.Status != 0" class="chat-by desktop:!text-caption-2 !text-[10px]">
              ƒê∆∞·ª£c g·ª≠i b·ªüi <span class="text-info-500"> {{dataItem.CreatedBy?.Name}}</span>
          </span>
      </ng-template>
  </div>

  <!--L·ªçc theo comments-->
  <div *ngIf="dataItem.Type == 12" class="log-comment w-full mb-3 {{ dataItem.IsOwner ? 'is_admin' : 'is_client' }}">
      <div class="w-full flex flex-row">

          <!-- Avatar Facebook_PageId -->
          <div class="mr-2">
            <div *ngIf="dataItem.Type == 12">
                <tpage-avatar-facebook [shape]="'circle'" [size]="36"
                    [psid]="!dataItem.IsOwner ? dataItem.UserId : team.ChannelId"
                    [token]="team.ChannelToken">
                </tpage-avatar-facebook>
            </div>
          </div>

        <!-- comment block -->
        <div class="flex flex-col w-full commnent-block">

          <div class="inline-flex w-fit chat-main-block group">
              <!-- N·ªôi dung b√¨nh lu·∫≠n -->
              <div class="chat-body w-full !m-0" tds-tooltip tooltipTitle="{{dataItem.ChannelCreatedTime | date:'dd'}}/{{dataItem.ChannelCreatedTime | date:'MM'}} {{dataItem.ChannelCreatedTime | date:'HH:mm'}}">

                  <div class="chat-content bg-white px-4 py-2 rounded-b-xl rounded-r-xl">
                      <div class="flex flex-auto">
                          <!--N·ªôi dung-->
                          <div *ngIf="dataItem.MessageFormatted || dataItem.Message">
                            <div *ngIf="dataItem.Type == 12 && (dataItem.Data | facebookDataCs)" class="name font-semibold pb-1">{{(dataItem.Data | facebookDataCs)?.from?.name}}</div>
                            <div class="content-message font-regular" showMore [length]="300" [text]="dataItem.MessageFormatted || dataItem.Message"></div>
                            <div class="hidden" [innerHtml]="(dataItem.MessageFormatted || dataItem.Message) | bbcodeConvert | safeHtml" #contentMessage></div>
                          </div>
                      </div>
                  </div>
              </div>

              <!-- L·ªói g·ª≠i tin -->
              <a class="flex items-center cursor-pointer ml-2" *ngIf="dataItem.Error?.Message || dataItem.Status == 2" tds-popover [popoverContent]="popoverBug">
                  <span class="tdsi-info-line text-error-400 text-body-1 leading-none" ></span>
              </a>
              <ng-template #popoverBug>
                  <div class="max-w-[336px] text-body-2 text-neutral-1-900">{{dataItem.Error? dataItem.Error.Message: ''}}</div>
              </ng-template>

            <!-- Thao t√°c -->
            <div *ngIf="!dataItem.Data?.attachments" class="chat-option invisible group-hover:visible">
                <div class="select-order flex flex-row items-center w-fit h-full pl-3">
                    <span tds-tooltip tooltipTitle="Ch·ªçn l√†m s·ªë ƒëi·ªán tho·∫°i" (click)="selectOrder('phone')"
                        class="h-5 w-5 bg-base-green-400 flex items-center justify-center rounded-md cursor-pointer mr-1.5">
                        <i class="tdsi-call-fill text-md text-white"></i>
                    </span>
                    <span tds-tooltip tooltipTitle="Ch·ªçn l√†m ƒë·ªãa ch·ªâ" (click)="selectOrder('address', undefined, dataItem.NlpEntities)"
                        class="h-5 w-5 bg-base-orange-500 flex items-center justify-center rounded-md cursor-pointer mr-1.5">
                        <i class="tdsi-pin-fill text-md text-white"></i>
                    </span>
                    <span tds-tooltip tooltipTitle="Th√™m v√†o ghi ch√∫" (click)="selectOrder('note')"
                        class="h-5 w-5 bg-base-blue-500 flex items-center justify-center rounded-md cursor-pointer" >
                        <i class="tdsi-note-2-fill text-md text-white"></i>
                    </span>
                </div>
            </div>
          </div>

          <!--Th√≠ch hi·ªán ·∫©n + CreatedBy.Name-->
          <div class="chat-meta bg-transparent text-neutral-1-600 desktop:text-caption-2 text-[10px] font-regular mt-1.5">
            <div class="chat-acts flex flex-row items-center" style="position: relative;">

              <button class="link-act hover:underline" [disabled]="isReplyingComment"
                  (click)="clickReply()"> Ph·∫£n h·ªìi
              </button>

              <span *ngIf="isReplyingComment" class="ml-1">
                  <tds-spinner [color]="'primary'" class="w-2 h-2"></tds-spinner>
              </span>

              <div class="h-1 w-1 bg-neutral-1-300 rounded-full mx-2.5"></div>

              <button class="link-act hover:underline" [disabled]="isLiking" [ngClass]="dataItem.Data?.user_likes ? 'text-secondary-1' : ''"
                  (click)="addLike()">
                  {{dataItem.Data?.user_likes ? 'ƒê√£ th√≠ch' : 'Th√≠ch'}}
              </button>

              <tds-spinner *ngIf="isLiking" [color]="'primary'" class="ml-1 w-2 h-2"></tds-spinner>
              <div class="h-1 w-1 bg-neutral-1-300 rounded-full mx-2.5"></div>

              <button class="link-act hover:underline" [disabled]="isHiding" (click)="hideComment()">
                {{dataItem.Data?.is_hidden ? 'Hi·ªán' : '·∫®n'}}
              </button>

              <tds-spinner *ngIf="isHiding" [color]="'primary'" class="ml-1 w-2 h-2"></tds-spinner>
              <div class="h-1 w-1 bg-neutral-1-300 rounded-full mx-2.5"></div>

              <span *ngIf="dataItem.CreatedTime" class="date-diff cursor-pointer hover:underline" tds-tooltip
                tooltipTitle="{{dataItem.CreatedTime | date:'dd'}} Th√°ng {{dataItem.CreatedTime | date:'MM'}}, {{dataItem.CreatedTime | date:'yyyy'}} l√∫c {{dataItem.CreatedTime | date:'HH:mm'}}">
                {{dataItem.CreatedTime | yiDiffDateTime}}
              </span>
            </div>

            <span class="chat-by font-regular desktop:!text-caption-2 !text-[10px]" *ngIf="dataItem.IsSystem && dataItem.CreatedBy"> ƒê∆∞·ª£c g·ª≠i b·ªüi
              <span class="font-semibold" style="color: #03468b;">{{dataItem.CreatedBy.Name}}</span>
            </span>
          </div>

          <!-- Input tr·∫£ l·ªùi b√¨nh lu·∫≠n -->
          <div *ngIf="isReply" @eventReplyComment class="chat-reply relative flex flex-col gap-y-5 bg-white rounded-xl w-full p-4 mt-4 border-b-2 border-primary-1" >
              <div [ngClass]="isReplyingComment ? '!cursor-wait' : 'hidden'" class="absolute top-0 left-0 z-10 w-full h-full opacity-100"></div>
              <div class="flex flex-row w-full">

                  <textarea id="inputReply" #contentReply tdsInput placeholder="Nh·∫≠p n·ªôi dung tr·∫£ l·ªùi"
                      [(ngModel)]="messageModel" [ngModelOptions]="{standalone: true}"
                      class="w-full resize-none !p-0 !m-0 no-scrollbar" (keydown.enter)="onEnter($event)">
                  </textarea>

                  <button tds-button type="button" color="primary" tds-tooltip tooltipTitle="Nh·∫•n Enter ƒë·ªÉ g·ª≠i"
                     class="!rounded-full" [size]="'lg'" (click)="clickSendMessage()">
                      <span class="flex items-center px-5">
                          <i class="tdsi-send-fill text-lg leading-none mr-2"></i> G·ª≠i
                      </span>
                  </button>
              </div>

              <!-- Check Private Reply -->
              <div class="quick-message gap-5">
                <div class="check gap-4 flex items-center">
                  <div class="icon-send flex gap-x-2 items-center">
                      <button tds-button-flat-icon size="sm" color="custom" class="cursor-pointer focus:border-transparent focus:ring-0 hover:bg-neutral-3-50" type="button" tds-tooltip tooltipTitle="C·∫£m x√∫c"
                          tds-popover popoverTrigger="click" [popoverContent]="infoEmojiMart" [popoverAutoClose]="true"
                          [popoverBackdrop]="true" popoverPlacement="top">
                        <i class="tdsi-emotion-line text-neutral-1-400 text-xl leading-none"></i>
                      </button>
                      <ng-template #infoEmojiMart>
                        <div (loadEmojiMart)="loadEmojiMart($event)" icon-emoji-mart></div>
                      </ng-template>

                      <quick-reply-button tds-tooltip tooltipTitle="Tin nh·∫Øn nhanh"
                        (onQuickReplySelected)="onQuickReplySelected($event)" [partner]="partner">
                      </quick-reply-button>

                      <div class="w-[30px]">
                        <button *ngIf="isPrivateReply" (click)="onProductsbypageFb()" tds-button-flat-icon size="sm" color="custom" class="cursor-pointer focus:border-transparent focus:ring-0 focus:ring-transparent hover:bg-neutral-3-50" type="button" tds-tooltip tooltipTitle="S·∫£n ph·∫©m">
                          <i class="tdsi-product-line text-neutral-1-400 text-xl leading-none"></i>
                        </button>
                      </div>
                  </div>
                  <tds-checkbox [checked]="isPrivateReply" (change)="changeIsPrivateReply()">G·ª≠i v·ªÅ tin nh·∫Øn</tds-checkbox>
                </div>
              </div>
          </div>

          <!-- Ph·∫£n h·ªìi b√¨nh lu·∫≠n -->
          <div *ngIf="children" class="chat-list" @eventReplyComment>
              <div class="chat-item mt-4 chat-comment flex flex-row" *ngFor="let child of children; let i = index;">
                  <div *ngIf="dataItem.Type == 12" class="avatar mr-2">
                    <tpage-avatar-facebook [shape]="'circle'" [size]="36" [psid]="child.Data?.from?.id"
                        [token]="team.ChannelToken">
                    </tpage-avatar-facebook>
                  </div>

                  <div class="flex flex-col w-full">
                      <div class="inline-flex w-fit group">
                          <div class="chat-body !m-0" tds-tooltip
                              tooltipTitle="{{child.ChannelCreatedTime | date:'dd'}}/{{child.ChannelCreatedTime | date:'MM'}} {{child.ChannelCreatedTime | date:'HH:mm'}}">
                              <div class="chat-content flex-auto bg-white px-4 py-2 rounded-b-xl rounded-r-xl">
                                  <div class="border-activety-comment" *ngIf="child.MessageFormatted || child.Message">
                                        <div *ngIf="dataItem.Type == 12">
                                            <div class="name font-semibold pb-1">{{child.Data?.from?.name}}</div>
                                        </div>

                                      <div class="content-message font-regular" showMore [length]="300" [text]="child.MessageFormatted || child.Message"></div>
                                      <div class="hidden" [innerHtml]="(child.MessageFormatted || child.Message) | bbcodeConvert | safeHtml" #contentMessageChild></div>
                                  </div>
                              </div>
                          </div>

                        <div *ngIf="!child.Data?.attachments" class="chat-option invisible group-hover:visible">
                            <div class="select-order flex flex-row items-center w-fit h-full pl-3">
                                <span tds-tooltip tooltipTitle="Ch·ªçn l√†m s·ªë ƒëi·ªán tho·∫°i"
                                    class="h-5 w-5 bg-base-green-400 flex items-center justify-center rounded-md cursor-pointer mr-1.5"
                                    (click)="selectOrder('phone')">
                                    <i class="tdsi-call-fill text-md text-white"></i>
                                </span>

                                <span tds-tooltip tooltipTitle="Ch·ªçn l√†m ƒë·ªãa ch·ªâ"
                                    class="h-5 w-5 bg-base-orange-500 flex items-center justify-center rounded-md cursor-pointer mr-1.5"
                                    (click)="selectOrder('address', i)">
                                    <i class="tdsi-pin-fill text-md text-white"></i>
                                </span>

                                <span tds-tooltip tooltipTitle="Th√™m v√†o ghi ch√∫"
                                    class="h-5 w-5 bg-base-blue-500 flex items-center justify-center rounded-md cursor-pointer"
                                    (click)="selectOrder('note', i)">
                                    <i class="tdsi-note-2-fill text-md text-white"></i>
                                </span>
                            </div>
                        </div>
                      </div>

                      <div class="chat-meta desktop:!text-caption-2 !text-[10px] text-neutral-1-600 text-caption-2 font-regular mt-1.5 relative">
                          <div class="chat-acts flex flex-row items-center relative" >
                              <span *ngIf="child.ChannelCreatedTime" class="date-diff cursor-pointer hover:underline"	tds-tooltip
                                  tooltipTitle="{{child.ChannelCreatedTime | date:'dd'}} Th√°ng {{child.ChannelCreatedTime | date:'MM'}}, {{child.ChannelCreatedTime | date:'yyyy'}} l√∫c {{child.ChannelCreatedTime | date:'HH:mm'}}">
                                  {{child.ChannelCreatedTime | yiDiffDateTime}}
                              </span>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
        </div>
      </div>
	</div>
  <!--L·ªçc theo comments v2 L·ªói hi·ªán th·ªã-->
</div>

