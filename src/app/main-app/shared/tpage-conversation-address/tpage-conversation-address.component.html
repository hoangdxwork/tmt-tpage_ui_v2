<div class="grid w-fyll grid-cols-1">
  <form [formGroup]="formAddress" class="flex flex-col gap-y-3">
    <div class="w-full flex gap-x-2 justify-between">
      <tds-form-field class="w-full">
        <input tdsInput placeholder="Số nhà, đường,..." [tdsInputDebounce]="200" (inputKeyup)="onchangeInputStreet($event)" formControlName="street" />
        <span tdsSuffix>
          <tds-button-group>
            <div tds-button color="secondary" tds-dropdown trigger="click" [tdsDropdownMenu]="menu" class="p-1 bg-neutral-3-100 rounded" (click)="onChangeExpand()">
              <span class="flex items-center text-caption-2" *ngIf="!currentExpand">
                Mở rộng <i class="tdsi-arrow-down-fill text-lg leading-none ml-1"></i>
              </span>
              <span class="flex items-center text-caption-2" *ngIf="currentExpand">
                Thu gọn <i class="tdsi-arrow-up-fill text-lg leading-none ml-1"></i>
              </span>
            </div>
            <tds-dropdown-menu #menu="tdsDropdownMenu">
              <div class="w-full">
              </div>
            </tds-dropdown-menu>
          </tds-button-group>
        </span>
      </tds-form-field>
      <button tds-button-icon color="primary" (click)="onSelectStreet()" *ngIf="!currentExpand">
        <span class="flex items-center">
          <i class="tdsi-location-fill"></i>
        </span>
      </button>
    </div>
    <div *ngIf="currentExpand" class="w-full grid grid-cols-2 gap-y-3 gap-x-5">
      <div class="w-full flex">
        <tds-form-field class="w-full">
          <tds-select valueField="Code" textField="Name" placeholder='Tỉnh/Thành'
            [valuePrimitive]="false" [allowClear]="true"
            formControlName="city" disabledField="isActive" [data]="lstCity"
            [allowClear]="true" (selectChange)="onSelectCity($event)">
          </tds-select>
        </tds-form-field>
      </div>
      <div class="w-full flex">
        <tds-form-field class="w-full">
          <tds-select valueField="Code" textField="Name" placeholder='Quận/Huyện'
            [valuePrimitive]="false" [allowClear]="true"
            formControlName="district" disabledField="isActive" [data]="lstDistrict"
            [allowClear]="true" (selectChange)="onSelectDistrict($event)">
          </tds-select>
        </tds-form-field>
      </div>
      <div class="w-full flex col-span-2">
        <tds-form-field class="w-full">
          <tds-select valueField="Code" textField="Name" placeholder='Phường/Xã'
            [valuePrimitive]="false" [allowClear]="true"
            formControlName="ward" disabledField="isActive" [data]="lstWard"
            [allowClear]="true" (selectChange)="onSelectWard($event)">
          </tds-select>
        </tds-form-field>
      </div>
      <div class="w-full flex col-span-2 bg-light-50 p-2.5 rounded-md">
        <div class="w-full flex flex-col gap-y-3">
          <div class="w-full flex gap-x-2 justify-between">
            <tds-form-field class="w-full flex">
              <input tdsInput placeholder="Số nhà, đường,..." [tdsInputDebounce]="200" (inputKeyup)="onchangeInputStreet($event)" formControlName="street"
              (keyup.enter)="onSelectStreet()" />
            </tds-form-field>
            <button type="button" tds-button-icon color="primary" (click)="onSelectStreet()">
              <span class="flex items-center">
                <i class="tdsi-location-fill"></i>
              </span>
            </button>
          </div>

          <ul class="w-full" *ngIf="isSuggest" >
              <li *ngFor="let item of lstResultCheck; index as i" (click)="setValueSelect(i, item)"
                class="flex tds-form-field-control w-full max-w-full border border-neutral-2-200 gap-x-4
                  dark:bg-d-neutral-3-50 dark:border-d-neutral-2-200 p-2 cursor-pointer mb-0.5 rounded-md bg-white items-center py-3 px-4">
                  <tds-tag status='error' class="h-6" *ngIf="index !== i; else tagSuggestCheck">
                    <span class="flex items-center">
                      <i class="tdsi-checkbox-check-fill text-lg leading-none"></i>
                    </span>
                  </tds-tag>
                  <ng-template #tagSuggestCheck>
                    <tds-tag status='primary' class="h-6">
                      <span class="flex items-center">
                        <i class="tdsi-checkbox-check-fill text-lg leading-none"></i>
                      </span>
                    </tds-tag>
                  </ng-template>
                  <a class="text-body-2">{{item.Address}}</a>
              </li>
          </ul>
        </div>
      </div>
    </div>
  </form>
</div>
